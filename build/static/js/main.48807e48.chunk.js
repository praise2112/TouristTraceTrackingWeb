(this["webpackJsonptourist-trace-tracking-web"]=this["webpackJsonptourist-trace-tracking-web"]||[]).push([[0],{133:function(e,t,a){e.exports=a.p+"static/media/bg2.0c637bd0.svg"},238:function(e,t,a){},264:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=c(r),i=a(1),l=c(a(365)),s=c(a(376));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={itemNumber:1,status:"idle"},a.items=[],a.onOpenEnd=a.onOpenEnd.bind(a),a.onCloseEnd=a.onCloseEnd.bind(a),a.onClick=a.onClick.bind(a),a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"onOpenEnd",value:function(e){if("open"===this.state.action)return this.state.itemNumber<this.props.children.length?(this.items[this.state.itemNumber].start(),void this.setState({itemNumber:this.state.itemNumber+1})):void(e==="item"+(this.props.children.length-1)&&this.props.onOpen())}},{key:"onCloseEnd",value:function(e){"open"!==this.state.action&&("item1"===e&&this.props.onClose(),this.state.itemNumber>1&&("item1"===e&&this.props.onClose(),this.setState({itemNumber:this.state.itemNumber-1})))}},{key:"onClick",value:function(){"open"===this.state.action?this.closeItems():this.openItem()}},{key:"getDistance",value:function(e){return this.props.wing?(parseInt(e/2,10)+1)*this.props.margin*(e%2||-1):this.props.margin*(e+1)}},{key:"getX",value:function(e,t){var a=this.props,n=a.type,r=a.margin,o=a.children;return"horizontal"===n?this.getDistance(e)+t:"circle"===n?t+r*Math.cos(2*Math.PI*e/(o.length-1)):t}},{key:"getY",value:function(e,t){var a=this.props,n=a.type,r=a.margin,o=a.children;return"vertical"===n?this.getDistance(e)+t:"circle"===n?t+r*Math.sin(2*Math.PI*e/(o.length-1)):t}},{key:"getItems",value:function(){var e=this,t=this.props,a=t.x,n=t.y,r=t.bumpy;return Array.from(Array(this.state.itemNumber).keys()).reverse().map((function(t){return o.default.createElement(l.default,{key:t,ref:function(a){e.items[t+1]=a},name:"item"+(t+1),onOpenAnimationEnd:e.onOpenEnd,onCloseAnimationEnd:e.onCloseEnd,x:e.getX(t,a),y:e.getY(t,n),bumpy:r,openSpeed:e.props.openSpeed,reverse:e.props.reverse,type:e.props.type},e.props.children[t+1])}))}},{key:"closeItems",value:function(){var e=this;this.setState({action:"close"}),this.button.reverse(),Array.from(Array(this.state.itemNumber).keys()).reverse().forEach((function(t){return e.items[t+1].reverse()}))}},{key:"close",value:function(){"open"===this.state.action&&this.closeItems()}},{key:"open",value:function(){"open"!==this.state.action&&this.openItem()}},{key:"openItem",value:function(){this.setState({action:"open"}),this.button.start(),this.items[this.state.itemNumber].start()}},{key:"render",value:function(){return o.default.createElement("div",{style:this.props.style,className:this.props.className},o.default.createElement("div",{style:{position:"relative"}},this.menuButton,this.getItems()))}},{key:"menuButton",get:function(){var e=this;return o.default.createElement(s.default,{ref:function(t){e.button=t},onClick:this.onClick,x:this.props.x,y:this.props.y,bumpy:this.props.bumpy},this.props.children[0])}}]),t}(r.Component);u.propTypes={margin:i.number.isRequired,type:i.oneOf(["horizontal","vertical","circle"]).isRequired,wing:i.bool,x:i.number,y:i.number,onClose:i.func,onOpen:i.func,className:i.string,bumpy:i.bool,openSpeed:i.number,reverse:i.bool},u.defaultProps={x:0,y:0,style:{},onClose:function(){},onOpen:function(){},bumpy:!0,openSpeed:60,reverse:!1},t.default=u},278:function(e,t,a){e.exports=a.p+"static/media/bg.4a95439e.svg"},296:function(e,t,a){e.exports=a(461)},301:function(e,t,a){},302:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},364:function(e,t,a){},365:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(0),l=a(1),s=(n=i)&&n.__esModule?n:{default:n},c=a(236);var u=function(e){var t=e.x,a=e.y;return[{scaleX:(0,c.spring)(0,{stiffness:1500,damping:100}),scaleY:(0,c.spring)(0,{stiffness:1500,damping:100}),x:(0,c.spring)(t,{stiffness:1500,damping:50}),y:(0,c.spring)(a,{stiffness:1500,damping:50})},{scaleX:(0,c.spring)(.5,{stiffness:120,damping:20}),scaleY:(0,c.spring)(.5,{stiffness:120,damping:20}),x:(0,c.spring)(t,{stiffness:120,damping:20}),y:(0,c.spring)(a,{stiffness:120,damping:20})},{scaleX:(0,c.spring)(1,{stiffness:120,damping:20}),scaleY:(0,c.spring)(1,{stiffness:120,damping:20}),x:(0,c.spring)(t,{stiffness:120,damping:20}),y:(0,c.spring)(a,{stiffness:120,damping:20})}]},m=function(e,t){return[{scaleX:(0,c.spring)(0,{stiffness:1500,damping:100}),scaleY:(0,c.spring)(0,{stiffness:1500,damping:100}),x:(0,c.spring)(e,{stiffness:1500,damping:50}),y:(0,c.spring)(t,{stiffness:1500,damping:50})},{scaleX:(0,c.spring)(1.6,{stiffness:1500,damping:150}),scaleY:(0,c.spring)(.7,{stiffness:1500,damping:150}),x:(0,c.spring)(e,{stiffness:1500,damping:100}),y:(0,c.spring)(t,{stiffness:1500,damping:100})},{scaleX:(0,c.spring)(1,{stiffness:1500,damping:18}),scaleY:(0,c.spring)(1,{stiffness:1500,damping:18}),x:(0,c.spring)(e,{stiffness:1500,damping:100}),y:(0,c.spring)(t,{stiffness:1500,damping:100})}]},p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.timerIds=[],a.state={sequence:0},a.sequenceParams=a.props.bumpy?m(e):u(e),a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"start",value:function(){var e=this;this.timerIds[1]=setTimeout((function(){e.setState({sequence:1}),e.timerIds[1]=null}),this.props.openSpeed),this.timerIds[2]=setTimeout((function(){e.setState({sequence:2}),e.timerIds[2]=null,e.props.onOpenAnimationEnd(e.props.name)}),this.props.openSpeed)}},{key:"reverse",value:function(){var e=this;this.timerIds.forEach((function(e){e&&clearTimeout(e)})),this.timerIds[0]=setTimeout((function(){e.timerIds[0]=null,e.props.onCloseAnimationEnd(e.props.name)}),100),this.setState({sequence:0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.x,n=t.y,o=t.reverse,l=t.type,u=void 0,m=void 0;return o?(u=-1*a,m="vertical"===l?-1*n:n):(u=a,m=n),this.props.children?s.default.createElement(c.Motion,{style:this.sequenceParams[this.state.sequence]},(function(t){var a=t.scaleX,n=t.scaleY;return(0,i.cloneElement)(e.props.children,r({},e.props.children.props||{},{style:r({},e.props.children.props&&e.props.children.props.style||{},{transform:"translate3d("+u+"px, "+m+"px, 0) scaleX("+a+") scaleY("+n+")",WebkitTransform:"translate3d("+u+"px, "+m+"px, 0) scaleX("+a+") scaleY("+n+")",position:"absolute"})}))})):null}}]),t}(i.Component);p.propTypes={x:l.number.isRequired,y:l.number.isRequired,name:l.string.isRequired,onOpenAnimationEnd:l.func,onCloseAnimationEnd:l.func,bumpy:l.bool.isRequired,openSpeed:l.number.isRequired,reverse:l.bool.isRequired,type:l.oneOf(["horizontal","vertical","circle"]).isRequired},p.defaultProps={onOpenAnimationEnd:function(){},onCloseAnimationEnd:function(){}},t.default=p},376:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(0),l=a(1),s=(n=i)&&n.__esModule?n:{default:n},c=a(236);var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={sequence:0},a.sequenceParams=a.props.bumpy?[{scaleX:(0,c.spring)(1,{stiffness:1500,damping:10}),scaleY:(0,c.spring)(1,{stiffness:1500,damping:10})},{scaleX:(0,c.spring)(.6,{stiffness:1500,damping:50}),scaleY:(0,c.spring)(.6,{stiffness:1500,damping:50})},{scaleX:(0,c.spring)(1,{stiffness:1500,damping:10}),scaleY:(0,c.spring)(1,{stiffness:1500,damping:10})}]:[{scaleX:(0,c.spring)(1,{stiffness:1500,damping:10}),scaleY:(0,c.spring)(1,{stiffness:1500,damping:10})},{scaleX:(0,c.spring)(1,{stiffness:200,damping:50}),scaleY:(0,c.spring)(1,{stiffness:200,damping:50})},{scaleX:(0,c.spring)(1,{stiffness:1500,damping:10}),scaleY:(0,c.spring)(1,{stiffness:1500,damping:10})}],a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"start",value:function(){var e=this;setTimeout((function(){return e.setState({sequence:1})}),100),setTimeout((function(){return e.setState({sequence:2})}),150)}},{key:"reverse",value:function(){var e=this;this.setState({sequence:1}),setTimeout((function(){return e.setState({sequence:0})}),50)}},{key:"render",value:function(){var e=this,t=this.props,a=t.x,n=t.y,o=t.onClick;return this.props.children?s.default.createElement(c.Motion,{style:this.sequenceParams[this.state.sequence]},(function(t){var l=t.scaleX,s=t.scaleY;return(0,i.cloneElement)(e.props.children,r({},e.props.children.props||{},{onClick:o,style:r({},e.props.children.props&&e.props.children.props.style||{},{transform:"translate3d("+a+"px, "+n+"px, 0) scaleX("+l+") scaleY("+s+")",WebkitTransform:"translate3d("+a+"px, "+n+"px, 0) scaleX("+l+") scaleY("+s+")",position:"absolute"})}))})):null}}]),t}(i.Component);u.propTypes={x:l.number.isRequired,y:l.number.isRequired,onClick:l.func,bumpy:l.bool},t.default=u},461:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),i=a.n(o),l=(a(301),a(302),a(29)),s=a(79),c=a(129),u=a.n(c),m=a(17),p=a.n(m),d=function(e){e?p.a.defaults.headers.common.Authorization=e:delete p.a.defaults.headers.common.Authorization},h=a(30),g=a.n(h),f=a(518),v=function(e,t){return function(a){return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return"http://34.87.80.154:443/api/users/login",console.log("logging in user "),n.next=4,g.a.awrap(p.a.post("http://34.87.80.154:443/api/users/login",e).then((function(e){console.log("res is:"+e),console.log(e);var n=e.data.token;localStorage.setItem("jwtToken",n),d(n),console.log("Token from auth actions is:"),console.log(n);var r=u()(n);console.log("decoded:"),console.log(r),a(b(r)),f.a.success("Login Successful"),t.push("/")})).catch((function(e){console.log("err is :".concat(e)),console.log(e),console.log(e.data),console.log(e.response),a({type:"GET_ERRORS",payload:e.response.data})})));case 4:case"end":return n.stop()}}))}},b=function(e){return{type:"SET_CURRENT_USER",payload:e}},y=function(){return function(e){localStorage.removeItem("jwtToken"),d(!1),e(b({}))}},E=a(34),k=a(77),S=a(261),O=a(65),C=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},w={isAuthenticated:!1,user:{}},N={},x={profile:null,profiles:null},j={hist:null},T=Object(k.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(O.a)({},e,{isAuthenticated:!C(t.payload),user:t.payload});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;case"CLEAR_ERRORS":return{};default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PROFILE_LOADING":return Object(O.a)({},e);case"GET_PROFILE":return Object(O.a)({},e,{profile:t.payload});case"GET_PROFILES":return Object(O.a)({},e,{profiles:t.payload});case"CLEAR_CURRENT_PROFILE":return Object(O.a)({},e,{profile:null});default:return e}},hist:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_HISTORY":return Object(O.a)({},e,{hist:t.payload});default:return e}}}),_=[S.a],L=Object(k.e)(T,{},Object(k.d)(k.a.apply(void 0,_),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),R=(a(364),a(10)),B=a(31),P=a(24),M=a(36),A=a(37),z=a(19),I=a(38),D=a(46),U=a(500),Y=a(501),W=a(498),G=a(102),H=a(522),V=a(280),F=a(192),q=a.n(F),X=a(137),Z=a.n(X),K=a(138),J=a.n(K),$=a(139),Q=a.n($),ee=a(197),te=a.n(ee),ae=a(198),ne=a.n(ae),re=a(199),oe=a.n(re),ie=a(200),le=a.n(ie),se=a(201),ce=a.n(se),ue=a(195),me=a.n(ue),pe=a(186),de=a.n(pe),he=a(194),ge=a.n(he),fe=a(193),ve=a.n(fe),be=a(196),ye=a.n(be),Ee=a(523),ke=a(264),Se=a.n(ke),Oe=a(182),Ce=a(499),we=(a(238),a(514)),Ne=a(27),xe=function(e){var t=e.iconType,a=e.value,n=e.onChange,o=e.text;return r.a.createElement("div",{style:{margin:0,width:"30vw",textAlign:"center",alignItems:"center",marginRight:"4vw"}},r.a.createElement(we.a,{style:{margin:0,marginTop:"0.5em",width:"30vw"},value:a,min:0,max:60,onChange:n}),r.a.createElement("span",null,r.a.createElement(Ne.a,{style:{margin:0,verticalAlign:"0.1em"},type:t}),"\xa0\xa0",o))},je=function(e,t){var a=Object(n.useState)(e),r=Object(D.a)(a,2),o=r[0],i=r[1];return[o,function(e){i(e),t(null,null,e,null)},function(){i(0)}]},Te=a(521),_e=a(26),Le=a(269),Re=a.n(Le),Be=a(496),Pe=a(144),Me=Re()((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(R.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(R.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(_e.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(_e.b)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(R.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200}),sectionDesktop:Object(R.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(R.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),iconn:{margin:e.spacing(1),padding:"0.2em",borderRadius:"50%",fontSize:"3em",color:e.palette.getContrastText(Be.a[500]),backgroundColor:Be.a[500]},motionMenu:{"& div div:nth-child(2)":{display:"flex !important",marginLeft:"-15em",background:"rgba(33, 150, 243, 0.2)",borderRadius:"0 0 20% 20%"},"& div div:nth-child(3)":{display:"flex !important",marginLeft:"-15em",background:"rgba(33, 150, 243, 0.2)",borderRadius:"20% 20% 0 0"}},avatar:{margin:e.spacing(1),padding:"0.2em !important",borderRadius:"50% !important",fontSize:"3em !important",backgroundColor:"#1565c0 !important"},avatar2:{margin:e.spacing(1),padding:"0.2em !important",borderRadius:"50% !important",fontSize:"3em !important",backgroundColor:Pe.a[900]},removeButtonBorder:{"&:focus":{outline:"none !important",outlineOffset:"none !important"}},removeLinkColor:{textDecoration:"none",color:"inherit !important"},"span input":{border:"none !important",borderWidth:"0 !important",borderColor:"none !important"},"@media only screen and (max-width: 768px)":{motionMenu:{"& div div:nth-child(2)":{display:"flex !important",marginLeft:"1.5em",background:"rgba(33, 150, 243, 0.2) ",borderRadius:"0 0 20% 20%"},"& div div:nth-child(3)":{display:"flex !important",marginLeft:"1.5em",background:"rgba(33, 150, 243, 0.2) ",borderRadius:"20% 20% 0 0"}}}}})),Ae=function(e){var t=Object(n.useState)(e),a=Object(D.a)(t,2),r=a[0],o=a[1];return[r,function(e){o(e)},function(){o(0)}]};var ze=a(520),Ie=a(279),De=a(133),Ue=a.n(De),Ye=function(e){return{mapStyle:{height:"89.5vh",width:"100%",padding:"0"},isSelectorOpenStyle:{position:"relative",zIndex:-1},showCard:{display:"none"},mark:{position:"absolute",top:"50%",left:"-100%",maxWidth:"50px",maxHeight:"60px"},cardContainer:{background:"url(".concat(Ue.a,") no-repeat center center fixed"),WebkitBackgroundSize:"cover",MozBackgroundSize:"cover",OBackgroundSize:"cover",backgroundSize:"cover !important"}}},We=function(e){function t(e){var a;return Object(B.a)(this,t),(a=Object(M.a)(this,Object(A.a)(t).call(this,e))).onSelect=function(e){console.log("from on select"),a.state.geoCoderService.geocode({address:e},(function(t){var n=t[0].geometry.location;console.log(t),console.log(t[0]),console.log(n),a.props.addMarker(n.lat(),n.lng(),e)}))},a.handleSearch=function(e){console.log("from handle search");var t=a.state,n=t.autoCompleteService,r=t.singaporeLatLng;if(e.length>0){var o={input:e,location:r,radius:3e4};n.getQueryPredictions(o,(function(e){if(e){var t=e.map((function(e){return e.description}));a.setState({dataSource:t,suggestions:e})}}))}},a.state={suggestions:[],dataSource:[],singaporeLatLng:a.props.singaporeLatLng,autoCompleteService:a.props.autoCompleteService,geoCoderService:a.props.geoCoderService},a}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this.state.dataSource;this.props.classes;return r.a.createElement(ze.a,{dataSource:e,placeholder:this.props.placeholder,onSelect:this.onSelect,onSearch:this.handleSearch,style:{width:"20em",border:"none",color:"rgba(0, 0, 0, 0.5)"}},r.a.createElement(Ie.a,{suffix:r.a.createElement(Ne.a,{type:"search"})}))}}]),t}(n.Component);var Ge=function(e){var t=Me(),a=r.a.useState(null),n=Object(D.a)(a,2),o=n[0],i=n[1],s=r.a.useState(null),c=Object(D.a)(s,2),u=c[0],m=c[1];r.a.useEffect((function(){Object(Oe.loadCSS)("https://use.fontawesome.com/releases/v5.1.0/css/all.css",document.querySelector("#font-awesome-css"))}),[]);var p,d=Boolean(o),h=Boolean(u),g=function(){m(null)},f=function(){i(null),g()},v=r.a.createElement(V.a,{anchorEl:o,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:d,onClose:f},r.a.createElement(H.a,{onClick:f},"Profile"),r.a.createElement(H.a,{onClick:f},"My account")),b="primary-search-account-menu-mobile";p=e.isLoggedIn?r.a.createElement(V.a,{anchorEl:u,anchorOrigin:{vertical:"top",horizontal:"right"},id:b,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:h,onClose:g},r.a.createElement(H.a,null,r.a.createElement(W.a,{"aria-label":"Log out",color:"inherit"},r.a.createElement(Ce.a,{className:"fas fa-sign-out-alt",style:{fontSize:18,paddingTop:"0.05em"}})),r.a.createElement(l.b,{to:"#",onClick:e.logOutUser},r.a.createElement("p",{style:{marginTop:"1.25em"}},"Log Out"))),r.a.createElement(H.a,null,r.a.createElement(W.a,{edge:"end","aria-label":"Profile",color:"inherit"},r.a.createElement(q.a,null)),r.a.createElement(l.b,{to:"/profile",onClick:function(e){return e.stopPropagation()}},r.a.createElement("p",{style:{marginTop:"1.25em",paddingLeft:"0.5em"}},"Profile"))),r.a.createElement(H.a,{onClick:function(e){i(e.currentTarget)}},r.a.createElement(W.a,{edge:"end","aria-label":"History",color:"inherit"},r.a.createElement(ve.a,null)),r.a.createElement(l.b,{to:"/history/1",onClick:function(e){return e.stopPropagation()}},r.a.createElement("p",{style:{marginTop:"1.25em",paddingLeft:"0.5em"}},"  History")))):r.a.createElement(V.a,{anchorEl:u,anchorOrigin:{vertical:"top",horizontal:"right"},id:b,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:h,onClose:g},r.a.createElement(H.a,null,r.a.createElement(W.a,{"aria-label":"login",color:"inherit"},r.a.createElement(ge.a,null)),r.a.createElement(l.b,{to:"/login",onClick:function(e){return e.stopPropagation()}},r.a.createElement("p",{style:{marginTop:"1.25em",paddingLeft:"0.5em"}},"Log In"))),r.a.createElement(H.a,null,r.a.createElement(W.a,{"aria-label":"sign up",color:"inherit"},r.a.createElement(Ce.a,{className:"fas fa-user-plus",style:{fontSize:18,width:"1.5em",paddingTop:"0.05em"}})),r.a.createElement(l.b,{to:"/register",onClick:function(e){return e.stopPropagation()}},r.a.createElement("p",{style:{marginTop:"1.25em"}},"Sign Up"))));var y=r.a.createElement("div",{className:t.sectionDesktop},r.a.createElement(Ee.a,{title:"Log Out"},r.a.createElement(W.a,{"aria-label":"Log out",color:"inherit"},r.a.createElement(l.b,{to:"#",onClick:e.logOutUser},r.a.createElement(Ce.a,{className:"fas fa-sign-out-alt",style:{fontSize:18,paddingTop:"0.09em"}})))),r.a.createElement(Ee.a,{title:"Profile"},r.a.createElement(W.a,{edge:"end","aria-label":"Profile",color:"inherit"},r.a.createElement(l.b,{to:"/profile",onClick:function(e){return e.stopPropagation()}},r.a.createElement(q.a,{style:{paddingBottom:"0.08em"}})))),r.a.createElement(Ee.a,{title:"History"},r.a.createElement(W.a,{edge:"end","aria-label":"History",color:"inherit"},r.a.createElement(l.b,{to:"/history/1",onClick:function(e){return e.stopPropagation()}},r.a.createElement(ve.a,{style:{paddingBottom:"0.08em"}}))))),E=r.a.createElement("div",{className:t.sectionDesktop},r.a.createElement(Ee.a,{title:"Login"},r.a.createElement(W.a,{"aria-label":"login",color:"inherit"},r.a.createElement(l.b,{to:"/login",onClick:function(e){return e.stopPropagation()}},r.a.createElement(ge.a,{style:{paddingBottom:"0.08em"}})))),r.a.createElement(Ee.a,{title:"Sign Up"},r.a.createElement(W.a,{"aria-label":"sign up",color:"inherit"},r.a.createElement(l.b,{to:"/register",onClick:function(e){return e.stopPropagation()}},r.a.createElement(Ce.a,{className:"fas fa-user-plus",style:{fontSize:18,width:"1.5em",paddingTop:"0.08em"}}))))),k=r.a.useRef(null),S=je(30,e.onSelectOption),O=Object(D.a)(S,3),C=O[0],w=O[1],N=(O[2],!1),x=r.a.createElement(Ee.a,{title:"Recommendations"},r.a.createElement(W.a,{"aria-label":"recommendations",color:"inherit",className:t.removeButtonBorder},r.a.createElement("i",{className:"hovicon effect-8 mini",onClick:function(){e.onSelectOption(N=!N,null,null,null),k.current.click()}},r.a.createElement(Ce.a,{className:"far fa-lightbulb ",style:{fontSize:"1em",width:"1.5em",paddingTop:"0.05em"}})))),j=Ae(x),T=Object(D.a)(j,3),_=T[0],L=T[1],R=(T[2],r.a.createElement(Ee.a,{title:"Restaurants"},r.a.createElement(W.a,{"aria-label":"Restaurants",color:"inherit",style:{padding:0,paddingBottom:"2.6em"},className:t.removeButtonBorder+" hovicon effect-8 mini"},r.a.createElement(Te.a,{className:t.avatar2},r.a.createElement(Z.a,{onClick:function(){k.current.click(),e.onSelectOption(!0,null,null,null)}}))))),B=r.a.createElement(Ee.a,{title:"Hotels"},r.a.createElement(W.a,{"aria-label":"Hotels",color:"inherit",style:{padding:0,paddingBottom:"2.6em"},className:t.removeButtonBorder+" hovicon effect-8 mini"},r.a.createElement(Te.a,{className:t.avatar2},r.a.createElement(J.a,{onClick:function(){k.current.click(),e.onSelectOption(!0,null,null,null)}})))),P=r.a.createElement(Ee.a,{title:"Cafe"},r.a.createElement(W.a,{"aria-label":"Cafe",color:"inherit",style:{padding:0,paddingBottom:"2.6em"},className:t.removeButtonBorder+" hovicon effect-8 mini"},r.a.createElement(Te.a,{className:t.avatar2},r.a.createElement(Q.a,{onClick:function(){k.current.click(),e.onSelectOption(!0,null,null,null)}})))),M=r.a.createElement(Ee.a,{title:"Museum"},r.a.createElement(W.a,{"aria-label":"Museum",color:"inherit",style:{padding:0,paddingBottom:"2.6em"},className:t.removeButtonBorder+" hovicon effect-8 mini"},r.a.createElement(Te.a,{className:t.avatar2},r.a.createElement(me.a,{onClick:function(){k.current.click(),e.onSelectOption(!0,null,null,null)}})))),A=r.a.createElement(Ee.a,{title:"Gym"},r.a.createElement(W.a,{"aria-label":"Gym",color:"inherit",style:{padding:0,paddingBottom:"2.6em"},className:t.removeButtonBorder+" hovicon effect-8 mini"},r.a.createElement(Te.a,{className:t.avatar2},r.a.createElement(Ce.a,{className:"fas fa-dumbbell ",style:{color:"white"},onClick:function(){k.current.click(),e.onSelectOption(!0,null,null,null)}})))),z=r.a.createElement(Ee.a,{title:"Zoo"},r.a.createElement(W.a,{"aria-label":"Zoo",color:"inherit",style:{padding:0,paddingBottom:"2.6em"},className:t.removeButtonBorder+" hovicon effect-8 mini"},r.a.createElement(Te.a,{className:t.avatar2},r.a.createElement(Ce.a,{className:"fas fa-paw",style:{color:"white"},onClick:function(){k.current.click(),e.onSelectOption(!0,null,null,null)}})))),I=r.a.createElement(Ee.a,{title:"Spa"},r.a.createElement(W.a,{"aria-label":"Spa",color:"inherit",style:{padding:0,paddingBottom:"2.6em"},className:t.removeButtonBorder+" hovicon effect-8 mini"},r.a.createElement(Te.a,{className:t.avatar2},r.a.createElement(ye.a,{onClick:function(){k.current.click(),e.onSelectOption(!0,null,null,null)}})))),F=r.a.createElement(Ee.a,{title:"Banks"},r.a.createElement(W.a,{"aria-label":"Banks",color:"inherit",style:{padding:0,paddingBottom:"2.6em"},className:t.removeButtonBorder+" hovicon effect-8 mini"},r.a.createElement(Te.a,{className:t.avatar2},r.a.createElement(te.a,{onClick:function(){k.current.click(),e.onSelectOption(!0,null,null,null)}})))),X=r.a.createElement(Ee.a,{title:"Gas Stations"},r.a.createElement(W.a,{"aria-label":"Gas Stations",color:"inherit",style:{padding:0,paddingBottom:"2.6em"},className:t.removeButtonBorder+" hovicon effect-8 mini"},r.a.createElement(Te.a,{className:t.avatar2},r.a.createElement(ne.a,{onClick:function(){k.current.click(),e.onSelectOption(!0,null,null,null)}})))),K=r.a.createElement(Ee.a,{title:" Parking Lots"},r.a.createElement(W.a,{"aria-label":"Parking Lots",color:"inherit",style:{padding:0,paddingBottom:"2.6em"},className:t.removeButtonBorder+" hovicon effect-8 mini"},r.a.createElement(Te.a,{className:t.avatar2},r.a.createElement(oe.a,{onClick:function(){k.current.click(),e.onSelectOption(!0,null,null,null)}})))),$=r.a.createElement(Ee.a,{title:" Groceries"},r.a.createElement(W.a,{"aria-label":" Groceries",color:"inherit",style:{padding:0,paddingBottom:"2.6em"},className:t.removeButtonBorder+" hovicon effect-8 mini"},r.a.createElement(Te.a,{className:t.avatar2},r.a.createElement(le.a,{onClick:function(){k.current.click(),e.onSelectOption(!0,null,null,null)}})))),ee=r.a.createElement(Ee.a,{title:" Post Offices"},r.a.createElement(W.a,{"aria-label":"recommendations",color:"inherit",style:{padding:0,paddingBottom:"2.6em"},className:t.removeButtonBorder+" hovicon effect-8 mini"},r.a.createElement(Te.a,{className:t.avatar2},r.a.createElement(ce.a,{onClick:function(){k.current.click(),e.onSelectOption(!0,null,null,null)}})))),ae=r.a.createElement(Se.a,{x:-25,y:-15,type:"vertical",margin:80,className:t.motionMenu},r.a.createElement("div",{style:{display:"none"}},r.a.createElement(Ce.a,{ref:k,className:"fa fa-bars",style:{color:"black"}})),r.a.createElement("div",null,r.a.createElement(Ee.a,{title:"Restaurants"},r.a.createElement(W.a,{"aria-label":"Restaurants",color:"inherit",onClick:function(e){return L(R)},className:t.removeButtonBorder},r.a.createElement(Te.a,{className:t.avatar},r.a.createElement(Z.a,{onClick:function(){k.current.click(),e.onSelectOption(!1,"restaurant",null,null)}})))),r.a.createElement(Ee.a,{title:"Hotels"},r.a.createElement(W.a,{"aria-label":"Hotels",color:"inherit",onClick:function(e){return L(B)},className:t.removeButtonBorder},r.a.createElement(Te.a,{className:t.avatar},r.a.createElement(J.a,{onClick:function(){k.current.click(),e.onSelectOption(!1,"lodging",null,null)}})))),r.a.createElement(Ee.a,{title:"Cafe"},r.a.createElement(W.a,{"aria-label":"Cafe",color:"inherit",onClick:function(e){return L(P)},className:t.removeButtonBorder},r.a.createElement(Te.a,{className:t.avatar},r.a.createElement(Q.a,{onClick:function(){k.current.click(),e.onSelectOption(!1,"cafe",null,null)}})))),r.a.createElement(Ee.a,{title:"Museum"},r.a.createElement(W.a,{"aria-label":"Museum",color:"inherit",onClick:function(e){return L(M)},className:t.removeButtonBorder},r.a.createElement(Te.a,{className:t.avatar},r.a.createElement(me.a,{onClick:function(){k.current.click(),e.onSelectOption(!1,"museum",null,null)}})))),r.a.createElement(Ee.a,{title:"Zoo"},r.a.createElement(W.a,{"aria-label":"Zoo",color:"inherit",onClick:function(e){return L(z)},className:t.removeButtonBorder},r.a.createElement(Te.a,{className:t.avatar},r.a.createElement(Ce.a,{className:"fas fa-paw",style:{color:"white"},onClick:function(){k.current.click(),e.onSelectOption(!1,"zoo",null,null)}})))),r.a.createElement(Ee.a,{title:"Spa"},r.a.createElement(W.a,{"aria-label":"Spa",color:"inherit",onClick:function(e){return L(I)},className:t.removeButtonBorder},r.a.createElement(Te.a,{className:t.avatar},r.a.createElement(ye.a,{onClick:function(){k.current.click(),e.onSelectOption(!1,"spa",null,null)}}))))),r.a.createElement("div",null,r.a.createElement(Ee.a,{title:"Gym"},r.a.createElement(W.a,{"aria-label":"Gym",color:"inherit",onClick:function(e){return L(A)},className:t.removeButtonBorder},r.a.createElement(Te.a,{className:t.avatar},r.a.createElement(Ce.a,{className:"fas fa-dumbbell ",style:{color:"white"},onClick:function(){k.current.click(),e.onSelectOption(!1,"gym",null,null)}})))),r.a.createElement(Ee.a,{title:"Banks"},r.a.createElement(W.a,{"aria-label":"Banks",color:"inherit",onClick:function(e){return L(F)},className:t.removeButtonBorder},r.a.createElement(Te.a,{className:t.avatar},r.a.createElement(te.a,{onClick:function(){k.current.click(),e.onSelectOption(!1,"bank",null,null)}})))),r.a.createElement(Ee.a,{title:"Gas Stations"},r.a.createElement(W.a,{"aria-label":"Gas Stations",color:"inherit",onClick:function(e){return L(X)},className:t.removeButtonBorder},r.a.createElement(Te.a,{className:t.avatar},r.a.createElement(ne.a,{onClick:function(){k.current.click(),e.onSelectOption(!1,"gas_station",null,null)}})))),r.a.createElement(Ee.a,{title:" Parking Lots"},r.a.createElement(W.a,{"aria-label":"Parking Lots",color:"inherit",onClick:function(e){return L(K)},className:t.removeButtonBorder},r.a.createElement(Te.a,{className:t.avatar},r.a.createElement(oe.a,{onClick:function(){k.current.click(),e.onSelectOption(!1,"parking",null,null)}})))),r.a.createElement(Ee.a,{title:" Groceries"},r.a.createElement(W.a,{"aria-label":" Groceries",color:"inherit",onClick:function(e){return L($)},className:t.removeButtonBorder},r.a.createElement(Te.a,{className:t.avatar},r.a.createElement(le.a,{onClick:function(){k.current.click(),e.onSelectOption(!1,"grocery_or_supermarket",null,null)}})))),r.a.createElement(Ee.a,{title:" Post Offices"},r.a.createElement(W.a,{"aria-label":"Post Offices",color:"inherit",onClick:function(e){return L(ee)},className:t.removeButtonBorder},r.a.createElement(Te.a,{className:t.avatar},r.a.createElement(ce.a,{onClick:function(){k.current.click(),e.onSelectOption(!1,"post_office",null,null)}}))))));return r.a.createElement("div",{className:t.grow},r.a.createElement(U.a,{position:"static"},r.a.createElement(Y.a,null,r.a.createElement(G.a,{className:t.title,variant:"h6",noWrap:!0},"TouristTraceTrack"),r.a.createElement("div",{className:t.grow}),r.a.createElement("div",{className:t.sectionDesktop},r.a.createElement(xe,{iconType:"clock-circle",value:C,onChange:function(e){return w(e)},text:"Minutes to destination"})),ae,_,r.a.createElement("div",{className:t.search},r.a.createElement(We,{autoCompleteService:e.autoCompleteService,geoCoderService:e.geoCoderService,singaporeLatLng:e.singaporeLatLng,markerName:e.name,addMarker:e.addMarker,placeholder:"Search\u2026",onSelectOption:e.onSelectOption})),e.isLoggedIn?y:E,r.a.createElement("div",{className:t.sectionMobile},r.a.createElement(W.a,{"aria-label":"show more","aria-controls":b,"aria-haspopup":"true",onClick:function(e){m(e.currentTarget)},color:"inherit"},r.a.createElement(de.a,null))))),p,v)},He=a(140),Ve=a.n(He),Fe=a(66),qe=a.n(Fe),Xe=a(6),Ze=a.n(Xe),Ke=a(5),Je=a(145),$e=a(147),Qe=function(e){return{container:{height:"100vh",background:"url(".concat(Ue.a,") no-repeat center center fixed"),WebkitBackgroundSize:"cover",MozBackgroundSize:"cover",OBackgroundSize:"cover",backgroundSize:"cover !important"},paper:{paddingTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),color:e.palette.getContrastText(Be.a[500]),backgroundColor:Be.a[500]},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},orange:{color:e.palette.getContrastText(Be.a[500]),backgroundColor:Be.a[500]},root:{display:"flex","& > *":{margin:e.spacing(1)}},pink:{color:e.palette.getContrastText(Je.a[500]),backgroundColor:Je.a[500]},green:{color:"#fff",backgroundColor:$e.a[500]},halfWidth_x:{width:"45%"},halfWidth_x2:{width:"45%",marginLeft:"10%"},selected:{color:"rgb(25, 26, 33)"},hist:{color:"black",fontSize:"1.5em",textAlign:"center",marginTop:"0.5em",marginBottom:"0.5em",padding:"0.2em","&:hover":{color:"white",background:"rgba(25, 26, 33, 0.5)"}}}},et=a(505),tt=a(503),at=a(504),nt=a(515),rt=a(507),ot=a(506),it=a(20),lt=a(75),st=a.n(lt),ct=a(502),ut=function(e){function t(e){var a;return Object(B.a)(this,t),(a=Object(M.a)(this,Object(A.a)(t).call(this,e))).state={email:"",username:"",password:"",loading:!1,errors:{}},a.handleChange=a.handleChange.bind(Object(z.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(z.a)(a)),a}return Object(I.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&(this.props.history.push("/"),f.a.success("User already logged in. Redirecting..."))}},{key:"componentWillReceiveProps",value:function(e,t){var a=this;e.auth.isAuthenticated&&this.props.history.push("/"),e.errors&&!e.auth.isAuthenticated&&this.setState({errors:e.errors},(function(){a.setState({loading:!1}),void 0!==a.state.errors.message&&f.a.error(a.state.errors.message)}))}},{key:"handleChange",value:function(e){this.setState(Object(R.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={username:this.state.username,password:this.state.password};console.log("".concat(this.state.username).concat(this.state.password)),this.setState({loading:!0}),this.props.loginUser(t,this.props.history),console.log("Handle submit")}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=(t.email,t.username),n=t.password,o=t.loading;return r.a.createElement("section",{className:e.container},r.a.createElement(ct.a,{component:"main",maxWidth:"xs"},r.a.createElement(tt.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(Te.a,{className:e.avatar},r.a.createElement(st.a,null)),r.a.createElement(G.a,{component:"h1",variant:"h5"},"Login"),r.a.createElement(it.ValidatorForm,{onSubmit:this.handleSubmit,ref:"form",className:e.form},r.a.createElement(it.TextValidator,{label:"Username*",value:a,name:"username",onChange:this.handleChange,fullWidth:!0,placeholder:"Password",variant:"outlined",type:"text",margin:"normal",validators:["required"],errorMessages:["Enter a username"]}),r.a.createElement(it.TextValidator,{className:e.form,value:n,placeholder:"Password",name:"password",variant:"outlined",margin:"normal",onChange:this.handleChange,type:"password",fullwidth:!0,id:"password",label:"Password*",autoComplete:"password",autoFocus:!0,validators:["required"],errorMessages:["Please enter a password"]}),r.a.createElement("br",null),r.a.createElement(at.a,{control:r.a.createElement(nt.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(et.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:o},"LogIn"),r.a.createElement(ot.a,{container:!0},r.a.createElement(ot.a,{item:!0,xs:!0},r.a.createElement(rt.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(ot.a,{item:!0},r.a.createElement(rt.a,{href:"/register",variant:"body2"},"Don't have an account? Sign Up"))))),r.a.createElement(G.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(rt.a,{color:"inherit",href:"https://material-ui.com/"},"Tourist Trace Tracking")," ",(new Date).getFullYear(),".")))}}]),t}(n.Component),mt=Object(E.b)((function(e){return{auth:e.auth,errors:e.errors}}),{loginUser:v})(Object(Ke.a)(Qe,{withTheme:!0})(ut)),pt=a(276),dt=a.n(pt),ht=function(e){var t=e.name,a=e.key,n=e.lat,o=e.lng,i=e.handleMarkerClick,l=e.col;return r.a.createElement("div",{key:a,style:{width:"10em",zIndex:"9000"},onClick:function(){return i(n,o)}},r.a.createElement("span",{className:"brand-red"},r.a.createElement("b",null,t)),r.a.createElement("br",null),r.a.createElement(dt.a,{style:{color:"".concat(l),fontSize:"2.5em"}}))},gt=a(275),ft=a(516),vt=a(4),bt=a(508),yt=a(509),Et=a(510),kt=a(511),St=a(512),Ot=a(146),Ct=a(202),wt=a.n(Ct),Nt=a(203),xt=a.n(Nt),jt=a(204),Tt=a.n(jt),_t=a(277),Lt=a.n(_t),Rt=Object(gt.a)((function(e){return{card:{maxWidth:345,width:"24em",margin:"0 1em 1em 1em"},media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:Ot.a[500]}}})),Bt=function(e){var t=e.info,a=e.key,n=Rt(),o=r.a.useState(!1),i=Object(D.a)(o,2),l=i[0],s=i[1],c=function(){s(!l)},u=t.address,m=t.distanceText,p=t.name,d=t.openNow,h=t.priceLevel,g=t.rating,f=t.timeText,v=t.photoUrl;return""===v&&(v="https://carolinadojo.com/wp-content/uploads/2017/04/default-image.jpg"),console.log(v),console.log(a+"ll"),r.a.createElement(Lt.a,{isFlipped:l,flipDirection:"vertical"},r.a.createElement(bt.a,{className:n.card,key:a},r.a.createElement(yt.a,{title:p}),r.a.createElement(Et.a,{className:n.media,image:v,title:p}),r.a.createElement(kt.a,null,r.a.createElement(G.a,{variant:"body2",color:"textSecondary",component:"p"},r.a.createElement("span",{className:"d-block text-center"},"Distance: ",m," - ",f," away")),r.a.createElement(G.a,{variant:"body2",color:"textSecondary",component:"p",className:"text-center"},r.a.createElement(ft.a,{value:g})," ",r.a.createElement("br",null),r.a.createElement(ft.a,{value:h,character:"$"}))),r.a.createElement(St.a,{disableSpacing:!0},r.a.createElement(W.a,{"aria-label":"add to favorites"},r.a.createElement(wt.a,null)),r.a.createElement(W.a,{"aria-label":"share"},r.a.createElement(xt.a,null)),r.a.createElement(W.a,{className:Object(vt.a)(n.expand,Object(R.a)({},n.expandOpen,l)),onClick:c,"aria-expanded":l,"aria-label":"show more"},r.a.createElement(Tt.a,null)))),r.a.createElement(bt.a,{className:n.card,key:a},r.a.createElement(yt.a,{title:p}),r.a.createElement(kt.a,null,r.a.createElement(G.a,{variant:"body2",color:"textSecondary",component:"p"},r.a.createElement("p",{className:"text-center"},"Address"),r.a.createElement("hr",null),u),r.a.createElement(G.a,{variant:"body2",color:"textSecondary",component:"p",className:"text-center"},d?r.a.createElement("span",null,r.a.createElement("b",null,"Open now")," "):r.a.createElement("span",null,r.a.createElement("b",null,"Closed now")))),r.a.createElement(St.a,{disableSpacing:!0},r.a.createElement(W.a,{"aria-label":"add to favorites"},r.a.createElement(wt.a,null)),r.a.createElement(W.a,{"aria-label":"share"},r.a.createElement(xt.a,null)),r.a.createElement(W.a,{className:Object(vt.a)(n.expand,Object(R.a)({},n.expandOpen,l)),onClick:c,"aria-expanded":l,"aria-label":"show more"},r.a.createElement(Tt.a,null)))))},Pt=a(513),Mt=function(e){return function(t){var a;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="http://34.87.80.154:443/api/users/".concat(e,"/history"),console.log("id is ".concat(e)),console.log(a),console.log("Token from profile actions is:"),console.log(),p.a.defaults.headers.common.Authorization="Bearer "+p.a.defaults.headers.common.Authorization,n.next=8,g.a.awrap(p.a.get(a).then((function(e){console.log("res is:"),console.log(e),t({type:"GET_HISTORY",payload:e.data.data}),t(zt()),f.a.success("Got users history")})).catch((function(e){t({type:"GET_HISTORY",payload:[]})})));case 8:p.a.defaults.headers.common.Authorization=p.a.defaults.headers.common.Authorization.slice(7);case 9:case"end":return n.stop()}}))}},At=function(e,t,a){return function(n){return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return"http://34.87.80.154:443",p.a.defaults.headers.common.Authorization="Bearer "+p.a.defaults.headers.common.Authorization,r.next=4,g.a.awrap(p.a.post("".concat("http://34.87.80.154:443","/api/users/").concat(t,"/history"),e).then((function(e){console.log("update res is:"),console.log(e),Mt(t),a.push("/"),n(zt()),f.a.success("History Updated Successfully")})).catch((function(e){console.log("Update err is:"),console.log(e),n({type:"GET_HISTORY",payload:[]})})));case 4:p.a.defaults.headers.common.Authorization=p.a.defaults.headers.common.Authorization.slice(7);case 5:case"end":return r.stop()}}))}},zt=function(){return{type:"CLEAR_ERRORS"}},It=function(e){function t(e){var a;return Object(B.a)(this,t),(a=Object(M.a)(this,Object(A.a)(t).call(this,e))).handleOption=function(e,t,n,r){null!=e&&a.setState({isSelectorOpenValue:e}),null!=t&&a.setState({selectorValue:t}),null!=n&&a.setState({sliderValue:n}),null!=r&&a.setState({searchValue:r}),console.log(e+"selectorOpenvalue"),console.log(t+"selector value"),console.log(n+"slidervalue"),console.log(r+"searchvalue"),setTimeout(a.handleSearch,2e3)},a.handleMarkerClick=function(e,t){console.log("Marker clicked"),console.log(e+""+t),a.setState({SG_COOR:{lat:e,lng:t},zoom:30})},a.updateConstraintName=function(e,t){e.preventDefault();var n=a.state.constraints,r=Object.assign([],n);r[t].name=e.target.value,a.setState({constraints:r})},a.updateConstraintTime=function(e,t){var n=a.state.constraints,r=Object.assign([],n);r[e].time=t,a.setState({constraints:r})},a.addMarker=function(e,t,n){a.setState({placeLocation:{lat:e,lng:t}});var r=a.state.markers,o=Object.assign([],r),i=n.split(",",2),l=n.split(",",2)+" "+n.split(",")[n.split(",").length-1];console.log(i+"shortname"),console.log(l+"shortname2");for(var s=!0,c=0;c<o.length;c++)if(o[c].name===n){s=!1,o[c].lat=e,o[c].lng=t,f.a.success('Updated "'.concat(l,'" Marker'));break}s&&(o.push({lat:e,lng:t,name:l}),f.a.success('Added new "'.concat(l,'" Marker'))),a.setState({markers:o}),a.handleSearch()},a.apiHasLoaded=function(e,t){console.log("map"),console.log(e),console.log(t),a.setState({mapsLoaded:!0,map:e,mapsApi:t,singaporeLatLng:new t.LatLng(a.state.SG_COOR.lat,a.state.SG_COOR.lng),autoCompleteService:new t.places.AutocompleteService,placesService:new t.places.PlacesService(e),geoCoderService:new t.Geocoder,directionService:new t.DirectionsService})},a.toggleMap=function(){a.state.searchResults.length>0&&a.setState({showCard:!a.state.showCard})},a.handleSearch=function(){var e=a.state,t=e.markers,n=(e.constraints,e.sliderValue),r=e.placesService,o=e.directionService,i=e.mapsApi;if(0!==t.length){var l=[],s=t[t.length-1],c=n,u=new i.LatLng(s.lat,s.lng),m={location:u,type:[a.state.selectorValue],query:a.state.selectorValue,rankBy:i.places.RankBy.DISTANCE};r.textSearch(m,(function(e){console.log("response is: "),console.log(e);for(var t=Math.min(10,e.length),n=function(t){var n=e[t],r=n.rating,i=n.name,s=n.formatted_address,m=n.price_level,p="",d=!1;n.opening_hours&&(d=n.opening_hours.open_now),n.photos&&n.photos.length>0&&(p=n.photos[0].getUrl());var h={origin:u,destination:s,travelMode:"DRIVING"};o.route(h,(function(e,t){if("OK"===t){var n=e.routes[0].legs[0];if(n.duration.value/60<c){var o=n.distance.text,u=n.duration.text;l.push({name:i,rating:r,address:s,openNow:d,priceLevel:m,photoUrl:p,distanceText:o,timeText:u})}a.setState({searchResults:l})}}))},r=0;r<t;r++)n(r)}))}else f.a.warn("Add a constraint and try again!")},a.state={constraints:[{name:"",time:0}],searchResults:[],mapsLoaded:!1,markers:[],map:{},mapsApi:{},singaporeLatLng:{},autoCompleteService:{},placesService:{},geoCoderService:{},directionService:{},isSelectorOpenValue:!1,showCard:!1,selectorValue:"cafe",sliderValue:30,searchValue:null,SG_COOR:{lat:21.0278,lng:105.8342},zoom:18,currentLocation:{},placeLocation:{},arrival_time:"",leave_time:""},a.onLogoutClick=a.onLogoutClick.bind(Object(z.a)(a)),a.handleOption=a.handleOption.bind(Object(z.a)(a)),a.handleMarkerClick=a.handleMarkerClick.bind(Object(z.a)(a)),a.toggleMap=a.toggleMap.bind(Object(z.a)(a)),a.saveLocation=a.saveLocation.bind(Object(z.a)(a)),a}return Object(I.a)(t,e),Object(P.a)(t,[{key:"onLogoutClick",value:function(e){e.preventDefault(),this.props.logoutUser()}},{key:"saveLocation",value:function(){if(this.props.auth.isAuthenticated){var e=[{latitude:this.state.currentLocation.lat,longitude:this.state.currentLocation.lng,arrival_at:this.state.arrival_time}],t=this.props.auth.user.result.id;console.log("auth is"),console.log(this.props.auth.user),this.props.updateHistory(e,t,this.props.history);var a=new Date,n=qe()(a.toDateString()+" "+a.toTimeString()).format("YYYY-MM-DD HH:mm:ss");this.setState({arrival_time:n})}}},{key:"componentDidMount",value:function(){var e=this;console.log(navigator),navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){console.log("pos is:"),console.log(t);var a={lat:t.coords.latitude,lng:t.coords.longitude},n=new Date,r=qe()(n.toDateString()+" "+n.toTimeString()).format("YYYY-MM-DD HH:mm:ss");e.setState({currentLocation:a,placeLocation:a,arrival_time:r});var o=e.state.markers,i=Object.assign([],o);i.push({lat:a.lat,lng:a.lng,name:""}),e.setState({markers:i}),setTimeout(e.handleSearch,1e3),console.log(e.state.arrival_time),console.log()}));window.addEventListener("beforeunload",(function(t){t.preventDefault();var a=new Date,n=qe()(a.toDateString()+" "+a.toTimeString()).format("YYYY-MM-DD HH:mm:ss");return e.setState({leave_time:n},(function(){e.saveLocation()})),t.returnValue="Are you sure you want to close?"})),setInterval((function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){var a={lat:t.coords.latitude,lng:t.coords.longitude};if(a.lat!==e.state.currentLocation.lat||a.lng!==e.state.currentLocation.lng){console.log("Location changed"),console.log(a);var n=new Date,r=qe()(n.toDateString()+" "+n.toTimeString()).format("YYYY-MM-DD HH:mm:ss");e.setState({leave_time:r,currentLocation:a},(function(){e.saveLocation()}))}else console.log("Same location"),console.log(a)}))}),3e4)}},{key:"render",value:function(){var e,t=this,a=this.props.auth,n=a.isAuthenticated,o=(a.user,this.props.classes),i=this.state,l=(i.constraints,i.mapsLoaded),s=i.singaporeLatLng,c=i.markers,u=i.searchResults,m=i.name,p=i.isSelectorOpenValue,d=i.showCard,h=i.currentLocation,g=i.placeLocation,f=this.state,v=f.autoCompleteService,b=f.geoCoderService,y=(f.SG_COOR,f.zoom),E=f.selectorValue;return r.a.createElement("div",{style:{width:"100%",maxWidth:"100%",overflow:"hidden"}},l?r.a.createElement(Ge,{isLoggedIn:n,logOutUser:this.props.logoutUser,onSelectOption:this.handleOption,autoCompleteService:v,geoCoderService:b,singaporeLatLng:s,markerName:m,addMarker:this.addMarker}):null,r.a.createElement("section",{className:Ze()(o.mapStyle,(e={},Object(R.a)(e,o.isSelectorOpenStyle,p),Object(R.a)(e,o.showCard,d),e))},r.a.createElement(Ve.a,{className:o.mapStyle,bootstrapURLKeys:{key:"AIzaSyCH-sM0x6FKG1Yh9CGf99d6SUa0wMvo8Ig",libraries:["places","directions"]},center:{lat:g.lat,lng:g.lng},defaultZoom:y,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){var a=e.map,n=e.maps;return t.apiHasLoaded(a,n)}},c.map((function(e,a){var n=e.name,o=e.lat,i=e.lng;return r.a.createElement(ht,{key:a,name:n,handleMarkerClick:t.handleMarkerClick,lat:o,lng:i,col:"rgb(245, 0, 87)"})})),void 0!==h.lat?r.a.createElement(ht,{key:"khg",handleMarkerClick:this.handleMarkerClick,lat:h.lat,lng:h.lng,col:"rgb(63, 81, 181)"}):null)),u.length>0&&d?r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:o.cardContainer},r.a.createElement("section",{className:"col-12 ml-5 "},r.a.createElement("div",{className:"d-flex flex-column justify-content-center"},r.a.createElement("h1",{className:"mb-4 fw-md"},E.replace("_"," ")),r.a.createElement("div",{className:"d-flex flex-wrap"},u.map((function(e,t){return r.a.createElement(Bt,{info:e,key:t})}))))))):null,d?r.a.createElement(Pt.a,{color:"secondary",style:{fontSize:"1em",position:"fixed",top:"90%",marginLeft:"0.5em"},onClick:this.toggleMap},r.a.createElement(Ce.a,{className:"fas fa-angle-double-left",onClick:this.toggleMap})):r.a.createElement(Pt.a,{color:"secondary",style:{fontSize:"1em",position:"absolute",top:"87%",marginLeft:"0.5em"},onClick:this.toggleMap},r.a.createElement(Ce.a,{className:"fas fa-angle-double-right",onClick:this.toggleMap})))}}]),t}(n.Component),Dt=Object(E.b)((function(e){return{auth:e.auth}}),{logoutUser:y,updateHistory:At})(Object(Ke.a)(Ye,{withTheme:!0})(It)),Ut=a(278),Yt=a.n(Ut),Wt=function(e){return{container:{height:"100vh",color:"white",background:"url(".concat(Yt.a,") no-repeat center center fixed"),WebkitBackgroundSize:"cover",MozBackgroundSize:"cover",OBackgroundSize:"cover",backgroundSize:"cover !important"},mapStyle:{marginTop:"1.5em",height:"90%",width:"60%",padding:"0",position:"absolute"},historyStyle:{marginTop:"3em",height:"100vh",width:"38%"},hist:{fontSize:"1.5em",textAlign:"center",marginTop:"0.5em",marginBottom:"0.5em",padding:"0.2em","&:hover":{color:"gray",borderRadius:"10%",background:"rgba(16, 16, 16, 0.5)"}},selected:{color:"gray"},yourHistory:{fontSize:"3em",textAlign:"center",color:"gray",fontWeight:"bold"},scrollbar:{},forceOverflow:{minHeight:"450px"},styleone:{}}},Gt=function(e){function t(e){var a;return Object(B.a)(this,t),(a=Object(M.a)(this,Object(A.a)(t).call(this,e))).state={errors:{},hist:[],zoom:18,currentLocation:{lat:21.0278,lng:105.8342,arrival_at:null,leave_at:null},histSelected:null},a}return Object(I.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.auth.user.result.id;this.props.getUserHistory(e)}},{key:"componentWillReceiveProps",value:function(e,t){var a=this;e.errors&&e.auth.isAuthenticated&&this.setState({errors:e.errors},(function(){a.setState({loading:!1}),void 0!==a.state.errors.message&&f.a.error(a.state.errors.message)})),e.hist&&this.setState({hist:e.hist})}},{key:"handleClick",value:function(e,t){var a={lat:e.latitude,lng:e.longitude,arrival_at:qe()(e.arrival_at).format("YYYY-MM-DD HH:mm:ss")};this.setState({currentLocation:a,histSelected:t})}},{key:"render",value:function(){var e=this,t=this.state,a=t.hist,n=t.currentLocation,o=t.zoom,i=t.histSelected,l=this.props.classes,s=null;return s=C(a.hist)?r.a.createElement("div",{className:l.hist},"Looks like there is nothing here!"):a.hist.map((function(t,a){return r.a.createElement("div",{key:a,onClick:function(){return e.handleClick(t,a)},className:Ze()(l.hist,Object(R.a)({},l.selected,a===i))},"Latitude: ",t.latitude,"\xb0 Longitude: ",t.longitude,"\xb0")})),r.a.createElement("div",{style:{width:"100%",maxWidth:"100%",overflow:"hidden"},className:l.container},r.a.createElement("section",{className:l.historyStyle,style:{display:"inline-block",overflow:"scroll"}},r.a.createElement("p",{className:l.yourHistory},"Your History"),s),r.a.createElement("section",{className:l.mapStyle,style:{display:"inline-block"}},null!==n.arrival_at&&void 0!==n.arrival_at&&"Invalid date"!==n.arrival_at?r.a.createElement("div",{style:{marginBottom:"0.2em",color:"white",textAlign:"center",fontSize:"1.5em"}},"You arrived at ",n.arrival_at):null,r.a.createElement(Ve.a,{className:l.mapStyle,bootstrapURLKeys:{key:"AIzaSyCH-sM0x6FKG1Yh9CGf99d6SUa0wMvo8Ig",libraries:["places","directions"]},center:{lat:n.lat,lng:n.lng},defaultZoom:o,yesIWantToUseGoogleMapApiInternals:!0},r.a.createElement(ht,{lat:n.lat,lng:n.lng,col:"rgb(245, 0, 87)"}))))}}]),t}(n.Component),Ht=Object(E.b)((function(e){return{auth:e.auth,errors:e.errors,profile:e.profile,hist:e.hist}}),{getUserHistory:Mt,updateHistory:At})(Object(Ke.a)(Wt,{withTheme:!0})(Object(s.g)(Gt))),Vt=function(e){return function(t){var a;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="http://34.87.80.154:443/api/users/".concat(e),console.log("id is ".concat(e)),console.log(a),console.log("Token from profile actions is:"),console.log(),p.a.defaults.headers.common.Authorization="Bearer "+p.a.defaults.headers.common.Authorization,n.next=8,g.a.awrap(p.a.get(a).then((function(e){console.log("res is:"),console.log(e),console.log(e.data.data),t({type:"GET_PROFILE",payload:e.data.data}),f.a.success("Got current profile")})).catch((function(e){t({type:"GET_PROFILE",payload:{}})})));case 8:p.a.defaults.headers.common.Authorization=p.a.defaults.headers.common.Authorization.slice(7);case 9:case"end":return n.stop()}}))}},Ft=function(){return{type:"CLEAR_ERRORS"}},qt=function(e){function t(e){var a;return Object(B.a)(this,t),(a=Object(M.a)(this,Object(A.a)(t).call(this,e))).state={firstName:"",lastName:"",birthday:"",city:"",country:"",nationality:"",email:"",phone:"",errors:{},loading:!1},a.handleChange=a.handleChange.bind(Object(z.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(z.a)(a)),a}return Object(I.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.auth.user.result.id;this.props.getCurrentProfile(e),console.log("state is:"),console.log(this.state)}},{key:"componentWillReceiveProps",value:function(e,t){var a=this;e.errors&&e.auth.isAuthenticated&&this.setState({errors:e.errors},(function(){a.setState({loading:!1}),void 0!==a.state.errors.message&&(f.a.error(a.state.errors.message),a.setState({errors:{}}))})),console.log("Profile is:"),console.log(e.profile);var n=qe()(e.profile.profile.birthday).format("YYYY-MM-DD");"Invalid date"===n&&(n=null),this.props.profile&&this.setState({firstName:e.profile.profile.firstName,lastName:e.profile.profile.lastName,birthday:n,city:e.profile.profile.city,country:e.profile.profile.country,nationality:e.profile.profile.nationality,email:e.profile.profile.email,phone:e.profile.profile.phone})}},{key:"handleChange",value:function(e){this.setState(Object(R.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),console.log("Handling submit");var t={firstName:this.state.firstName,lastName:this.state.lastName,birthday:this.state.birthday,city:this.state.city,country:this.state.country,nationality:this.state.nationality,email:this.state.email,phone:this.state.phone};console.log(t);var a=this.props.auth.user.result.id;console.log(a),this.setState({loading:!0}),this.props.updateProfile(t,a,this.props.history),console.log("Handle submit")}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.firstName,n=t.lastName,o=t.birthday,i=t.city,l=t.country,s=t.nationality,c=t.phone,u=t.email,m=t.loading;return r.a.createElement("section",{className:e.container,style:{height:"135vh"}},r.a.createElement(ct.a,{component:"main",maxWidth:"xs"},r.a.createElement(tt.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(Te.a,{className:e.avatar},r.a.createElement(st.a,null)),r.a.createElement(G.a,{component:"h1",variant:"h5"},"Your Profile"),r.a.createElement(it.ValidatorForm,{onSubmit:this.handleSubmit,ref:"form",className:e.form},r.a.createElement(it.TextValidator,{label:"First Name",value:a,name:"firstName",onChange:this.handleChange,fullWidth:!0,placeholder:"First Name",variant:"outlined",type:"text",margin:"normal",autoFocus:!0}),r.a.createElement(it.TextValidator,{label:"Last Name",value:n,name:"lastName",onChange:this.handleChange,fullWidth:!0,placeholder:"Last Name",variant:"outlined",type:"text",margin:"normal",autoFocus:!0}),r.a.createElement(it.TextValidator,{label:"Birthday",value:o,name:"birthday",onChange:this.handleChange,fullWidth:!0,variant:"outlined",type:"date",margin:"normal",InputLabelProps:{shrink:!0},autoFocus:!0}),r.a.createElement(it.TextValidator,{label:"City",value:i,name:"city",className:e.halfWidth_x,onChange:this.handleChange,placeholder:"City",variant:"outlined",type:"text",margin:"normal",autoFocus:!0}),r.a.createElement(it.TextValidator,{className:e.halfWidth_x2,label:"Country",value:l,name:"country",onChange:this.handleChange,placeholder:"Country",variant:"outlined",type:"text",margin:"normal",autoFocus:!0}),r.a.createElement(it.TextValidator,{label:"Nationality",value:s,name:"nationality",fullWidth:!0,onChange:this.handleChange,placeholder:"Nationality",variant:"outlined",type:"text",margin:"normal",autoFocus:!0}),r.a.createElement(it.TextValidator,{value:u,placeholder:"Email Address",name:"email",variant:"outlined",margin:"normal",onChange:this.handleChange,label:"Email",autoComplete:"email",autoFocus:!0,fullWidth:!0,validators:["isEmail"],errorMessages:["Must be an Email"]}),r.a.createElement(it.TextValidator,{label:"Phone",value:c,name:"phone",fullWidth:!0,onChange:this.handleChange,placeholder:"Phone Number",variant:"outlined",type:"Number",margin:"normal",autoFocus:!0}),r.a.createElement(et.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:m,className:e.submit},"Update Profile"))),r.a.createElement(G.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(rt.a,{color:"inherit",href:"https://material-ui.com/"},"Tourist Trace Tracking")," ",(new Date).getFullYear(),".")))}}]),t}(n.Component),Xt=Object(E.b)((function(e){return{auth:e.auth,errors:e.errors,profile:e.profile}}),{getCurrentProfile:Vt,updateProfile:function(e,t,a){return function(n){return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return"http://34.87.80.154:443",p.a.defaults.headers.common.Authorization="Bearer "+p.a.defaults.headers.common.Authorization,console.log(p.a.defaults.headers.common.Authorization),r.next=5,g.a.awrap(p.a.put("".concat("http://34.87.80.154:443","/api/users/").concat(t),e).then((function(e){console.log("res is:"),console.log(e),Vt(t),a.push("/"),n(Ft()),f.a.success("Profile Updated Successfully")})).catch((function(e){console.log(e),n({type:"GET_PROFILE",payload:{}})})));case 5:p.a.defaults.headers.common.Authorization=p.a.defaults.headers.common.Authorization.slice(7);case 6:case"end":return r.stop()}}))}}})(Object(Ke.a)(Qe,{withTheme:!0})(Object(s.g)(qt))),Zt=function(e){function t(e){var a;return Object(B.a)(this,t),(a=Object(M.a)(this,Object(A.a)(t).call(this,e))).state={username:"",password:"",repeatPassword:"",errors:{},loading:!1},a.handleChange=a.handleChange.bind(Object(z.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(z.a)(a)),a}return Object(I.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.auth.isAuthenticated&&(this.props.history.push("/"),f.a.success("You can't signUp when logged in. Redirecting..")),it.ValidatorForm.addValidationRule("isPasswordMatch",(function(t){return t===e.state.password}))}},{key:"componentWillReceiveProps",value:function(e,t){var a=this;if(e.errors&&!e.auth.isAuthenticated)this.setState({errors:e.errors},(function(){a.setState({loading:!1}),void 0!==a.state.errors.message&&f.a.error(a.state.errors.message)}));else{var n={username:this.state.username,password:this.state.password};setTimeout((function(){return a.props.loginUser(n,a.props.history)}),500)}}},{key:"handleChange",value:function(e){this.setState(Object(R.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),console.log("Handling submit");var t={username:this.state.username,password:this.state.password};this.setState({loading:!0}),this.props.registerUser(t,this.props.history),console.log("Handle submit")}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=(t.email,t.username),n=t.password,o=t.repeatPassword,i=t.loading;return r.a.createElement("section",{className:e.container},r.a.createElement(ct.a,{component:"main",maxWidth:"xs"},r.a.createElement(tt.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(Te.a,{className:e.avatar},r.a.createElement(st.a,null)),r.a.createElement(G.a,{component:"h1",variant:"h5"},"Sign Up"),r.a.createElement(it.ValidatorForm,{onSubmit:this.handleSubmit,ref:"form",className:e.form},r.a.createElement(it.TextValidator,{label:"Username*",value:a,name:"username",onChange:this.handleChange,fullWidth:!0,placeholder:"Username",variant:"outlined",type:"text",margin:"normal",validators:["required"],errorMessages:["Enter a username"]}),r.a.createElement(it.TextValidator,{className:e.form,value:n,placeholder:"Password",name:"password",variant:"outlined",margin:"normal",onChange:this.handleChange,id:"password",label:"Password*",autoComplete:"password",autoFocus:!0,validators:["required"],type:"password",errorMessages:["Please enter a password"]}),r.a.createElement(it.TextValidator,{className:e.form,value:o,placeholder:"Confirm Password",name:"repeatPassword",variant:"outlined",margin:"normal",onChange:this.handleChange,id:"repeatPassword",label:"Confirm Password*",autoComplete:"password",type:"password",autoFocus:!0,validators:["required","isPasswordMatch"],errorMessages:["Please enter a password","Password doesn't match"]}),r.a.createElement(at.a,{control:r.a.createElement(nt.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(et.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:i,className:e.submit},"Sign Up"),r.a.createElement(ot.a,{container:!0},r.a.createElement(ot.a,{item:!0,xs:!0},r.a.createElement(rt.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(ot.a,{item:!0},r.a.createElement(rt.a,{href:"/login",variant:"body2"},"Have an account? LogIn"))))),r.a.createElement(G.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(rt.a,{color:"inherit",href:"https://material-ui.com/"},"Tourist Trace Tracking")," ",(new Date).getFullYear(),".")))}}]),t}(n.Component),Kt=Object(E.b)((function(e){return{auth:e.auth,errors:e.errors}}),{registerUser:function(e,t){return function(a){var n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n="http://34.87.80.154:443/api/users",console.log(n),r.next=4,g.a.awrap(p.a.post(n,e).then((function(n){a(v(e,t)),f.a.success("Signed up successfully")})).catch((function(e){console.log("Error"+e),a({type:"GET_ERRORS",payload:e.response.data})})));case 4:case"end":return r.stop()}}))}},loginUser:v})(Object(Ke.a)(Qe,{withTheme:!0})(Object(s.g)(Zt))),Jt=(a(459),a(460),a(3)),$t=Object(E.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,n=Object(Jt.a)(e,["component","auth"]);return(r.a.createElement(s.b,Object.assign({},n,{render:function(e){return!0===a.isAuthenticated?r.a.createElement(t,e):r.a.createElement(s.a,{to:"/login"})}})))})),Qt=function(e){function t(e){var a;return Object(B.a)(this,t),(a=Object(M.a)(this,Object(A.a)(t).call(this,e))).state={username:"",name:"",password:"",users:{},loggedIn:!1,loading:!1,errors:{},itemSelected:1,data:""},a.handleChange=a.handleChange.bind(Object(z.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(z.a)(a)),a.handleClick=a.handleClick.bind(Object(z.a)(a)),a}return Object(I.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&(this.props.history.push("/"),f.a.success("User already logged in. Redirecting..."))}},{key:"componentWillReceiveProps",value:function(e,t){var a=this;e.auth.isAuthenticated&&this.props.history.push("/"),e.errors&&!e.auth.isAuthenticated&&this.setState({errors:e.errors},(function(){a.setState({loading:!1}),void 0!==a.state.errors.message&&f.a.error(a.state.errors.message)})),console.log("Profile is:"),console.log(e.profile.profiles),this.props.profile.profiles&&this.setState({users:this.props.profile.profiles})}},{key:"handleChange",value:function(e){this.setState(Object(R.a)({},e.target.name,e.target.value))}},{key:"handleClick",value:function(e,t){var a;switch(t){case"all_users":return a=this.props.profile.profiles.data.map((function(e,t){return r.a.createElement("div",{key:t,style:{marginBottom:"0.5em"}},"Client id: ",e.client_id," Name: ",e.firstName+"  "+e.lastName)})),void this.setState({data:a});case"delete_user":return a=r.a.createElement("div",{style:{fontSize:"3em",fontWeight:"bold",textAlign:"center"}},"Delete User is still in development"),void this.setState({data:a});case"update_history":return a=r.a.createElement("div",{style:{fontSize:"3em",fontWeight:"bold",textAlign:"center"}},"Update a user history is still in development"),void this.setState({data:a});case"delete_history":return a=r.a.createElement("div",{style:{fontSize:"3em",fontWeight:"bold",textAlign:"center"}},"Delete a user history is still in development"),void this.setState({data:a});case"update_profile":return a=r.a.createElement("div",{style:{fontSize:"3em",fontWeight:"bold",textAlign:"center"}},"Delete a user profile is still in development"),void this.setState({data:a})}this.setState({itemSelected:e})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={username:this.state.username,name:this.state.name,password:this.state.password};console.log("".concat(this.state.username).concat(this.state.password)),this.setState({loading:!0}),this.props.loginAdmin(t,this.props.history),this.setState({loggedIn:!0,loading:!1}),this.props.getAllUsers(),console.log("Handle submit")}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.username,o=a.name,i=a.password,l=a.loading,s=a.loggedIn,c=a.itemSelected,u=a.data,m=r.a.createElement("section",{className:t.container},r.a.createElement(ct.a,{component:"main",maxWidth:"xs"},r.a.createElement(tt.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(Te.a,{className:t.avatar},r.a.createElement(st.a,null)),r.a.createElement(G.a,{component:"h1",variant:"h5"},"Admin Login"),r.a.createElement(it.ValidatorForm,{onSubmit:this.handleSubmit,ref:"form",className:t.form},r.a.createElement(it.TextValidator,{label:"Username*",value:n,name:"username",onChange:this.handleChange,fullWidth:!0,placeholder:"Username",variant:"outlined",type:"text",margin:"normal",validators:["required"],errorMessages:["Enter a username"]}),r.a.createElement(it.TextValidator,{label:"Name*",value:o,name:"name",onChange:this.handleChange,fullWidth:!0,placeholder:"Name",variant:"outlined",type:"text",margin:"normal",validators:["required"],errorMessages:["Enter a name"]}),r.a.createElement(it.TextValidator,{className:t.form,value:i,placeholder:"Password",name:"password",variant:"outlined",margin:"normal",onChange:this.handleChange,type:"password",fullwidth:!0,id:"password",label:"Password*",autoComplete:"password",autoFocus:!0,validators:["required"],errorMessages:["Please enter a password"]}),r.a.createElement("br",null),r.a.createElement(at.a,{control:r.a.createElement(nt.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(et.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,disabled:l},"LogIn"),r.a.createElement(ot.a,{container:!0},r.a.createElement(ot.a,{item:!0,xs:!0},r.a.createElement(rt.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(ot.a,{item:!0},r.a.createElement(rt.a,{href:"/register",variant:"body2"},"Don't have an account? Sign Up"))))),r.a.createElement(G.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(rt.a,{color:"inherit",href:"https://material-ui.com/"},"Tourist Trace Tracking")," ",(new Date).getFullYear(),"."))),p=r.a.createElement("div",{style:{width:"100vw",height:"100vh",maxWidth:"100vw",overflow:"hidden"},className:t.container},r.a.createElement("p",{style:{textAlign:"center",fontSize:"3em",height:"5vh"}},"Admin Page"),r.a.createElement("section",{style:{width:"30%",display:"inline-block",backgroundColor:"rgba(17, 39, 60, 0.2)"}},r.a.createElement("p",{onClick:function(){return e.handleClick(1,"all_users")},className:Ze()(t.hist,Object(R.a)({},t.selected,1===c))},"View all Users"),r.a.createElement("p",{onClick:function(){return e.handleClick(2,"delete_user")},className:Ze()(t.hist,Object(R.a)({},t.selected,2===c))},"Delete a User"),r.a.createElement("p",{onClick:function(){return e.handleClick(3,"update_history")},className:Ze()(t.hist,Object(R.a)({},t.selected,3===c))},"Update a User History"),r.a.createElement("p",{onClick:function(){return e.handleClick(4,"delete_history")},className:Ze()(t.hist,Object(R.a)({},t.selected,4===c))},"Delete a User History"),r.a.createElement("p",{onClick:function(){return e.handleClick(5,"update_profile")},className:Ze()(t.hist,Object(R.a)({},t.selected,5===c))},"Update a User Profile")),r.a.createElement("section",{style:{width:"60%",height:"95vh",display:"inline-block",position:"absolute",marginLeft:"3em",fontSize:"1.5em"}},u));return r.a.createElement(r.a.Fragment,null,s?p:m)}}]),t}(n.Component),ea=Object(E.b)((function(e){return{auth:e.auth,errors:e.errors,profile:e.profile}}),{loginAdmin:function(e,t){return function(t){return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return"http://34.87.80.154:443/api/users/admin",console.log("logging in admin "),a.next=4,g.a.awrap(p.a.post("http://34.87.80.154:443/api/users/admin",e).then((function(e){console.log("res is:"+e),console.log(e),f.a.success("Login Successful")})).catch((function(e){console.log("err is :".concat(e)),console.log(e),console.log(e.data),console.log(e.response),t({type:"GET_ERRORS",payload:e.response.data})})));case 4:case"end":return a.stop()}}))}},getAllUsers:function(){return function(e){return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return"http://34.87.80.154:443/api/users",t.next=3,g.a.awrap(p.a.get("http://34.87.80.154:443/api/users").then((function(t){console.log("res is:"+t),console.log(t),f.a.success("Got all users"),e({type:"GET_PROFILES",payload:t.data})})).catch((function(t){return console.log("err is :".concat(t)),console.log(t),console.log(t.data),console.log(t.response),e({type:"GET_ERRORS",payload:t.response.data}),null})));case 3:case"end":return t.stop()}}))}}})(Object(Ke.a)(Qe,{withTheme:!0})(Qt));if(localStorage.jwtToken){d(localStorage.jwtToken);var ta=u()(localStorage.jwtToken);L.dispatch(b(ta));var aa=Date.now()/1e3;ta.exp<aa&&(L.dispatch(y()),window.location.href="/login")}var na=function(){return r.a.createElement(E.a,{store:L},r.a.createElement(l.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(Dt,e)}}),r.a.createElement(s.b,{exact:!0,path:"/login",render:function(e){return r.a.createElement(mt,e)}}),r.a.createElement(s.b,{exact:!0,path:"/admin",render:function(e){return r.a.createElement(ea,e)}}),r.a.createElement(s.b,{exact:!0,path:"/register",render:function(e){return r.a.createElement(Kt,e)}}),r.a.createElement($t,{exact:!0,path:"/history/:id",component:Ht}),r.a.createElement($t,{exact:!0,path:"/profile",component:Xt})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(na,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[296,1,2]]]);