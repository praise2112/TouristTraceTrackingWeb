(this["webpackJsonptourist-trace-tracking-web"]=this["webpackJsonptourist-trace-tracking-web"]||[]).push([[0],{133:function(e,a,t){e.exports=t.p+"static/media/bg2.0c637bd0.svg"},238:function(e,a,t){},278:function(e,a,t){e.exports=t.p+"static/media/bg.4a95439e.svg"},296:function(e,a,t){e.exports=t(461)},301:function(e,a,t){},302:function(e,a,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"},364:function(e,a,t){},461:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(6),l=t.n(o),i=(t(301),t(302),t(29)),c=t(79),s=t(129),m=t.n(s),u=t(17),d=t.n(u),p=function(e){e?d.a.defaults.headers.common.Authorization=e:delete d.a.defaults.headers.common.Authorization},h=t(33),g=t.n(h),f=t(518),v=function(e,a){return function(t){return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return"http://34.87.80.154:443/api/users/login",console.log("logging in user "),n.next=4,g.a.awrap(d.a.post("http://34.87.80.154:443/api/users/login",e).then((function(e){console.log("res is:"+e),console.log(e);var n=e.data.token;localStorage.setItem("jwtToken",n),p(n),console.log("Token from auth actions is:"),console.log(n);var r=m()(n);console.log("decoded:"),console.log(r),t(E(r)),f.a.success("Login Successful"),a.push("/")})).catch((function(e){console.log("err is :".concat(e)),console.log(e),console.log(e.data),console.log(e.response),t({type:"GET_ERRORS",payload:e.response.data})})));case 4:case"end":return n.stop()}}))}},E=function(e){return{type:"SET_CURRENT_USER",payload:e}},b=function(){return function(e){localStorage.removeItem("jwtToken"),p(!1),e(E({}))}},y=t(34),k=t(76),S=t(261),C=t(77),O=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},w={isAuthenticated:!1,user:{}},N={},x={profile:null},j={hist:null},L=Object(k.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_CURRENT_USER":return Object(C.a)({},e,{isAuthenticated:!O(a.payload),user:a.payload});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_ERRORS":return a.payload;case"CLEAR_ERRORS":return{};default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"PROFILE_LOADING":return Object(C.a)({},e);case"GET_PROFILE":return Object(C.a)({},e,{profile:a.payload});case"CLEAR_CURRENT_PROFILE":return Object(C.a)({},e,{profile:null});default:return e}},hist:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_HISTORY":return Object(C.a)({},e,{hist:a.payload});default:return e}}}),T=[S.a],B=Object(k.e)(L,{},Object(k.d)(k.a.apply(void 0,T),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),R=(t(364),t(10)),M=t(30),_=t(24),P=t(36),z=t(37),A=t(19),D=t(38),U=t(46),I=t(500),H=t(501),G=t(498),W=t(102),V=t(522),Y=t(280),F=t(192),q=t.n(F),Z=t(137),K=t.n(Z),X=t(138),J=t.n(X),$=t(139),Q=t.n($),ee=t(197),ae=t.n(ee),te=t(198),ne=t.n(te),re=t(199),oe=t.n(re),le=t(200),ie=t.n(le),ce=t(201),se=t.n(ce),me=t(195),ue=t.n(me),de=t(186),pe=t.n(de),he=t(194),ge=t.n(he),fe=t(193),ve=t.n(fe),Ee=t(196),be=t.n(Ee),ye=t(523),ke=t(264),Se=t.n(ke),Ce=t(182),Oe=t(499),we=(t(238),t(514)),Ne=t(27),xe=function(e){var a=e.iconType,t=e.value,n=e.onChange,o=e.text;return r.a.createElement("div",{style:{margin:0,width:"30vw",textAlign:"center",alignItems:"center",marginRight:"4vw"}},r.a.createElement(we.a,{style:{margin:0,marginTop:"0.5em",width:"30vw"},value:t,min:0,max:60,onChange:n}),r.a.createElement("span",null,r.a.createElement(Ne.a,{style:{margin:0,verticalAlign:"0.1em"},type:a}),"\xa0\xa0",o))},je=t(26),Le=t(269),Te=t.n(Le),Be=t(496),Re=t(144),Me=Te()((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(R.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(R.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(je.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(je.b)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(R.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200}),sectionDesktop:Object(R.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(R.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),iconn:{margin:e.spacing(1),padding:"0.2em",borderRadius:"50%",fontSize:"3em",color:e.palette.getContrastText(Be.a[500]),backgroundColor:Be.a[500]},motionMenu:{"& div div:nth-child(2)":{display:"flex !important",marginLeft:"-15em",background:"rgba(33, 150, 243, 0.2) ",borderRadius:"0 0 20% 20%"},"& div div:nth-child(3)":{display:"flex !important",marginLeft:"-15em",background:"rgba(33, 150, 243, 0.2) ",borderRadius:"20% 20% 0 0"}},avatar:{margin:e.spacing(1),padding:"0.2em",borderRadius:"50%",fontSize:"3em",backgroundColor:Re.a[800]},avatar2:{margin:e.spacing(1),padding:"0.2em",borderRadius:"50%",fontSize:"3em",backgroundColor:Re.a[900]},removeButtonBorder:{"&:focus":{outline:"none !important",outlineOffset:"none !important"}},removeLinkColor:{textDecoration:"none",color:"inherit !important"},"span input":{border:"none !important",borderWidth:"0 !important",borderColor:"none !important"},"@media only screen and (max-width: 768px)":{motionMenu:{"& div div:nth-child(2)":{display:"flex !important",marginLeft:"1.5em",background:"rgba(33, 150, 243, 0.2) ",borderRadius:"0 0 20% 20%"},"& div div:nth-child(3)":{display:"flex !important",marginLeft:"1.5em",background:"rgba(33, 150, 243, 0.2) ",borderRadius:"20% 20% 0 0"}}}}})),_e=function(e,a){var t=Object(n.useState)(e),r=Object(U.a)(t,2),o=r[0],l=r[1];return[o,function(e){l(e),a(null,null,e,null)},function(){l(0)}]},Pe=t(521),ze=function(e){var a=Object(n.useState)(e),t=Object(U.a)(a,2),r=t[0],o=t[1];return[r,function(e){o(e)},function(){o(0)}]};var Ae=t(520),De=t(279),Ue=t(133),Ie=t.n(Ue),He=function(e){return{mapStyle:{height:"89.5vh",width:"100%",padding:"0"},isSelectorOpenStyle:{position:"relative",zIndex:-1},showCard:{display:"none"},mark:{position:"absolute",top:"50%",left:"-100%",maxWidth:"50px",maxHeight:"60px"},cardContainer:{background:"url(".concat(Ie.a,") no-repeat center center fixed"),WebkitBackgroundSize:"cover",MozBackgroundSize:"cover",OBackgroundSize:"cover",backgroundSize:"cover !important"}}},Ge=function(e){function a(e){var t;return Object(M.a)(this,a),(t=Object(P.a)(this,Object(z.a)(a).call(this,e))).onSelect=function(e){console.log("from on select"),t.state.geoCoderService.geocode({address:e},(function(a){var n=a[0].geometry.location;console.log(a),console.log(a[0]),console.log(n),t.props.addMarker(n.lat(),n.lng(),e)}))},t.handleSearch=function(e){console.log("from handle search");var a=t.state,n=a.autoCompleteService,r=a.singaporeLatLng;if(e.length>0){var o={input:e,location:r,radius:3e4};n.getQueryPredictions(o,(function(e){if(e){var a=e.map((function(e){return e.description}));t.setState({dataSource:a,suggestions:e})}}))}},t.state={suggestions:[],dataSource:[],singaporeLatLng:t.props.singaporeLatLng,autoCompleteService:t.props.autoCompleteService,geoCoderService:t.props.geoCoderService},t}return Object(D.a)(a,e),Object(_.a)(a,[{key:"render",value:function(){var e=this.state.dataSource;this.props.classes;return r.a.createElement(Ae.a,{dataSource:e,placeholder:this.props.placeholder,onSelect:this.onSelect,onSearch:this.handleSearch,style:{width:"20em",border:"none",color:"rgba(0, 0, 0, 0.5)"}},r.a.createElement(De.a,{suffix:r.a.createElement(Ne.a,{type:"search"})}))}}]),a}(n.Component);var We=function(e){var a=Me(),t=r.a.useState(null),n=Object(U.a)(t,2),o=n[0],l=n[1],c=r.a.useState(null),s=Object(U.a)(c,2),m=s[0],u=s[1];r.a.useEffect((function(){Object(Ce.loadCSS)("https://use.fontawesome.com/releases/v5.1.0/css/all.css",document.querySelector("#font-awesome-css"))}),[]);var d,p=Boolean(o),h=Boolean(m),g=function(){u(null)},f=function(){l(null),g()},v=r.a.createElement(Y.a,{anchorEl:o,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:p,onClose:f},r.a.createElement(V.a,{onClick:f},"Profile"),r.a.createElement(V.a,{onClick:f},"My account")),E="primary-search-account-menu-mobile";d=e.isLoggedIn?r.a.createElement(Y.a,{anchorEl:m,anchorOrigin:{vertical:"top",horizontal:"right"},id:E,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:h,onClose:g},r.a.createElement(V.a,null,r.a.createElement(G.a,{"aria-label":"Log out",color:"inherit"},r.a.createElement(Oe.a,{className:"fas fa-sign-out-alt",style:{fontSize:18,paddingTop:"0.05em"}})),r.a.createElement(i.b,{to:"#",onClick:e.logOutUser},r.a.createElement("p",{style:{marginTop:"1.25em"}},"Log Out"))),r.a.createElement(V.a,null,r.a.createElement(G.a,{edge:"end","aria-label":"Profile",color:"inherit"},r.a.createElement(q.a,null)),r.a.createElement(i.b,{to:"/profile",onClick:function(e){return e.stopPropagation()}},r.a.createElement("p",{style:{marginTop:"1.25em",paddingLeft:"0.5em"}},"Profile"))),r.a.createElement(V.a,{onClick:function(e){l(e.currentTarget)}},r.a.createElement(G.a,{edge:"end","aria-label":"History",color:"inherit"},r.a.createElement(ve.a,null)),r.a.createElement(i.b,{to:"/history/1",onClick:function(e){return e.stopPropagation()}},r.a.createElement("p",{style:{marginTop:"1.25em",paddingLeft:"0.5em"}},"  History")))):r.a.createElement(Y.a,{anchorEl:m,anchorOrigin:{vertical:"top",horizontal:"right"},id:E,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:h,onClose:g},r.a.createElement(V.a,null,r.a.createElement(G.a,{"aria-label":"login",color:"inherit"},r.a.createElement(ge.a,null)),r.a.createElement(i.b,{to:"/login",onClick:function(e){return e.stopPropagation()}},r.a.createElement("p",{style:{marginTop:"1.25em",paddingLeft:"0.5em"}},"Log In"))),r.a.createElement(V.a,null,r.a.createElement(G.a,{"aria-label":"sign up",color:"inherit"},r.a.createElement(Oe.a,{className:"fas fa-user-plus",style:{fontSize:18,width:"1.5em",paddingTop:"0.05em"}})),r.a.createElement(i.b,{to:"/register",onClick:function(e){return e.stopPropagation()}},r.a.createElement("p",{style:{marginTop:"1.25em"}},"Sign Up"))));var b=r.a.createElement("div",{className:a.sectionDesktop},r.a.createElement(ye.a,{title:"Log Out"},r.a.createElement(G.a,{"aria-label":"Log out",color:"inherit"},r.a.createElement(i.b,{to:"#",onClick:e.logOutUser},r.a.createElement(Oe.a,{className:"fas fa-sign-out-alt",style:{fontSize:18,paddingTop:"0.09em"}})))),r.a.createElement(ye.a,{title:"Profile"},r.a.createElement(G.a,{edge:"end","aria-label":"Profile",color:"inherit"},r.a.createElement(i.b,{to:"/profile",onClick:function(e){return e.stopPropagation()}},r.a.createElement(q.a,{style:{paddingBottom:"0.08em"}})))),r.a.createElement(ye.a,{title:"History"},r.a.createElement(G.a,{edge:"end","aria-label":"History",color:"inherit"},r.a.createElement(i.b,{to:"/history/1",onClick:function(e){return e.stopPropagation()}},r.a.createElement(ve.a,{style:{paddingBottom:"0.08em"}}))))),y=r.a.createElement("div",{className:a.sectionDesktop},r.a.createElement(ye.a,{title:"Login"},r.a.createElement(G.a,{"aria-label":"login",color:"inherit"},r.a.createElement(i.b,{to:"/login",onClick:function(e){return e.stopPropagation()}},r.a.createElement(ge.a,{style:{paddingBottom:"0.08em"}})))),r.a.createElement(ye.a,{title:"Sign Up"},r.a.createElement(G.a,{"aria-label":"sign up",color:"inherit"},r.a.createElement(i.b,{to:"/register",onClick:function(e){return e.stopPropagation()}},r.a.createElement(Oe.a,{className:"fas fa-user-plus",style:{fontSize:18,width:"1.5em",paddingTop:"0.08em"}}))))),k=r.a.useRef(null),S=_e(30,e.onSelectOption),C=Object(U.a)(S,3),O=C[0],w=C[1],N=(C[2],!1),x=r.a.createElement(ye.a,{title:"Recommendations"},r.a.createElement(G.a,{"aria-label":"recommendations",color:"inherit",className:a.removeButtonBorder},r.a.createElement("i",{className:"hovicon effect-8 mini",onClick:function(){e.onSelectOption(N=!N,null,null,null),k.current.click()}},r.a.createElement(Oe.a,{className:"far fa-lightbulb ",style:{fontSize:"1em",width:"1.5em",paddingTop:"0.05em"}})))),j=ze(x),L=Object(U.a)(j,3),T=L[0],B=L[1],R=(L[2],r.a.createElement(ye.a,{title:"Restaurants"},r.a.createElement(G.a,{"aria-label":"Restaurants",color:"inherit",style:{padding:0,paddingBottom:"2.6em"},className:a.removeButtonBorder+" hovicon effect-8 mini"},r.a.createElement(Pe.a,{className:a.avatar2},r.a.createElement(K.a,{onClick:function(){k.current.click(),e.onSelectOption(!0,null,null,null)}}))))),M=r.a.createElement(ye.a,{title:"Hotels"},r.a.createElement(G.a,{"aria-label":"Hotels",color:"inherit",style:{padding:0,paddingBottom:"2.6em"},className:a.removeButtonBorder+" hovicon effect-8 mini"},r.a.createElement(Pe.a,{className:a.avatar2},r.a.createElement(J.a,{onClick:function(){k.current.click(),e.onSelectOption(!0,null,null,null)}})))),_=r.a.createElement(ye.a,{title:"Cafe"},r.a.createElement(G.a,{"aria-label":"Cafe",color:"inherit",style:{padding:0,paddingBottom:"2.6em"},className:a.removeButtonBorder+" hovicon effect-8 mini"},r.a.createElement(Pe.a,{className:a.avatar2},r.a.createElement(Q.a,{onClick:function(){k.current.click(),e.onSelectOption(!0,null,null,null)}})))),P=r.a.createElement(ye.a,{title:"Museum"},r.a.createElement(G.a,{"aria-label":"Museum",color:"inherit",style:{padding:0,paddingBottom:"2.6em"},className:a.removeButtonBorder+" hovicon effect-8 mini"},r.a.createElement(Pe.a,{className:a.avatar2},r.a.createElement(ue.a,{onClick:function(){k.current.click(),e.onSelectOption(!0,null,null,null)}})))),z=r.a.createElement(ye.a,{title:"Gym"},r.a.createElement(G.a,{"aria-label":"Gym",color:"inherit",style:{padding:0,paddingBottom:"2.6em"},className:a.removeButtonBorder+" hovicon effect-8 mini"},r.a.createElement(Pe.a,{className:a.avatar2},r.a.createElement(Oe.a,{className:"fas fa-dumbbell ",style:{color:"white"},onClick:function(){k.current.click(),e.onSelectOption(!0,null,null,null)}})))),A=r.a.createElement(ye.a,{title:"Zoo"},r.a.createElement(G.a,{"aria-label":"Zoo",color:"inherit",style:{padding:0,paddingBottom:"2.6em"},className:a.removeButtonBorder+" hovicon effect-8 mini"},r.a.createElement(Pe.a,{className:a.avatar2},r.a.createElement(Oe.a,{className:"fas fa-paw",style:{color:"white"},onClick:function(){k.current.click(),e.onSelectOption(!0,null,null,null)}})))),D=r.a.createElement(ye.a,{title:"Spa"},r.a.createElement(G.a,{"aria-label":"Spa",color:"inherit",style:{padding:0,paddingBottom:"2.6em"},className:a.removeButtonBorder+" hovicon effect-8 mini"},r.a.createElement(Pe.a,{className:a.avatar2},r.a.createElement(be.a,{onClick:function(){k.current.click(),e.onSelectOption(!0,null,null,null)}})))),F=r.a.createElement(ye.a,{title:"Banks"},r.a.createElement(G.a,{"aria-label":"Banks",color:"inherit",style:{padding:0,paddingBottom:"2.6em"},className:a.removeButtonBorder+" hovicon effect-8 mini"},r.a.createElement(Pe.a,{className:a.avatar2},r.a.createElement(ae.a,{onClick:function(){k.current.click(),e.onSelectOption(!0,null,null,null)}})))),Z=r.a.createElement(ye.a,{title:"Gas Stations"},r.a.createElement(G.a,{"aria-label":"Gas Stations",color:"inherit",style:{padding:0,paddingBottom:"2.6em"},className:a.removeButtonBorder+" hovicon effect-8 mini"},r.a.createElement(Pe.a,{className:a.avatar2},r.a.createElement(ne.a,{onClick:function(){k.current.click(),e.onSelectOption(!0,null,null,null)}})))),X=r.a.createElement(ye.a,{title:" Parking Lots"},r.a.createElement(G.a,{"aria-label":"Parking Lots",color:"inherit",style:{padding:0},className:a.removeButtonBorder+" hovicon effect-8 mini"},r.a.createElement(Pe.a,{className:a.avatar2},r.a.createElement(oe.a,{onClick:function(){k.current.click(),e.onSelectOption(!0,null,null,null)}})))),$=r.a.createElement(ye.a,{title:" Groceries"},r.a.createElement(G.a,{"aria-label":" Groceries",color:"inherit",style:{padding:0,paddingBottom:"2.6em"},className:a.removeButtonBorder+" hovicon effect-8 mini"},r.a.createElement(Pe.a,{className:a.avatar2},r.a.createElement(ie.a,{onClick:function(){k.current.click(),e.onSelectOption(!0,null,null,null)}})))),ee=r.a.createElement(ye.a,{title:" Post Offices"},r.a.createElement(G.a,{"aria-label":"recommendations",color:"inherit",style:{padding:0,paddingBottom:"2.6em"},className:a.removeButtonBorder+" hovicon effect-8 mini"},r.a.createElement(Pe.a,{className:a.avatar2},r.a.createElement(se.a,{onClick:function(){k.current.click(),e.onSelectOption(!0,null,null,null)}})))),te=r.a.createElement(Se.a,{x:-25,y:-15,type:"vertical",margin:80,className:a.motionMenu},r.a.createElement("div",{style:{display:"none"}},r.a.createElement(Oe.a,{ref:k,className:"fa fa-bars",style:{color:"black"}})),r.a.createElement("div",null,r.a.createElement(ye.a,{title:"Restaurants"},r.a.createElement(G.a,{"aria-label":"Restaurants",color:"inherit",onClick:function(e){return B(R)},className:a.removeButtonBorder},r.a.createElement(Pe.a,{className:a.avatar},r.a.createElement(K.a,{onClick:function(){k.current.click(),e.onSelectOption(!1,"restaurant",null,null)}})))),r.a.createElement(ye.a,{title:"Hotels"},r.a.createElement(G.a,{"aria-label":"Hotels",color:"inherit",onClick:function(e){return B(M)},className:a.removeButtonBorder},r.a.createElement(Pe.a,{className:a.avatar},r.a.createElement(J.a,{onClick:function(){k.current.click(),e.onSelectOption(!1,"lodging",null,null)}})))),r.a.createElement(ye.a,{title:"Cafe"},r.a.createElement(G.a,{"aria-label":"Cafe",color:"inherit",onClick:function(e){return B(_)},className:a.removeButtonBorder},r.a.createElement(Pe.a,{className:a.avatar},r.a.createElement(Q.a,{onClick:function(){k.current.click(),e.onSelectOption(!1,"cafe",null,null)}})))),r.a.createElement(ye.a,{title:"Museum"},r.a.createElement(G.a,{"aria-label":"Museum",color:"inherit",onClick:function(e){return B(P)},className:a.removeButtonBorder},r.a.createElement(Pe.a,{className:a.avatar},r.a.createElement(ue.a,{onClick:function(){k.current.click(),e.onSelectOption(!1,"museum",null,null)}})))),r.a.createElement(ye.a,{title:"Zoo"},r.a.createElement(G.a,{"aria-label":"Zoo",color:"inherit",onClick:function(e){return B(A)},className:a.removeButtonBorder},r.a.createElement(Pe.a,{className:a.avatar},r.a.createElement(Oe.a,{className:"fas fa-paw",style:{color:"white"},onClick:function(){k.current.click(),e.onSelectOption(!1,"zoo",null,null)}})))),r.a.createElement(ye.a,{title:"Spa"},r.a.createElement(G.a,{"aria-label":"Spa",color:"inherit",onClick:function(e){return B(D)},className:a.removeButtonBorder},r.a.createElement(Pe.a,{className:a.avatar},r.a.createElement(be.a,{onClick:function(){k.current.click(),e.onSelectOption(!1,"spa",null,null)}}))))),r.a.createElement("div",null,r.a.createElement(ye.a,{title:"Gym"},r.a.createElement(G.a,{"aria-label":"Gym",color:"inherit",onClick:function(e){return B(z)},className:a.removeButtonBorder},r.a.createElement(Pe.a,{className:a.avatar},r.a.createElement(Oe.a,{className:"fas fa-dumbbell ",style:{color:"white"},onClick:function(){k.current.click(),e.onSelectOption(!1,"gym",null,null)}})))),r.a.createElement(ye.a,{title:"Banks"},r.a.createElement(G.a,{"aria-label":"Banks",color:"inherit",onClick:function(e){return B(F)},className:a.removeButtonBorder},r.a.createElement(Pe.a,{className:a.avatar},r.a.createElement(ae.a,{onClick:function(){k.current.click(),e.onSelectOption(!1,"bank",null,null)}})))),r.a.createElement(ye.a,{title:"Gas Stations"},r.a.createElement(G.a,{"aria-label":"Gas Stations",color:"inherit",onClick:function(e){return B(Z)},className:a.removeButtonBorder},r.a.createElement(Pe.a,{className:a.avatar},r.a.createElement(ne.a,{onClick:function(){k.current.click(),e.onSelectOption(!1,"gas_station",null,null)}})))),r.a.createElement(ye.a,{title:" Parking Lots"},r.a.createElement(G.a,{"aria-label":"Parking Lots",color:"inherit",onClick:function(e){return B(X)},className:a.removeButtonBorder},r.a.createElement(Pe.a,{className:a.avatar},r.a.createElement(oe.a,{onClick:function(){k.current.click(),e.onSelectOption(!1,"parking",null,null)}})))),r.a.createElement(ye.a,{title:" Groceries"},r.a.createElement(G.a,{"aria-label":" Groceries",color:"inherit",onClick:function(e){return B($)},className:a.removeButtonBorder},r.a.createElement(Pe.a,{className:a.avatar},r.a.createElement(ie.a,{onClick:function(){k.current.click(),e.onSelectOption(!1,"grocery_or_supermarket",null,null)}})))),r.a.createElement(ye.a,{title:" Post Offices"},r.a.createElement(G.a,{"aria-label":"Post Offices",color:"inherit",onClick:function(e){return B(ee)},className:a.removeButtonBorder},r.a.createElement(Pe.a,{className:a.avatar},r.a.createElement(se.a,{onClick:function(){k.current.click(),e.onSelectOption(!1,"post_office",null,null)}}))))));return r.a.createElement("div",{className:a.grow},r.a.createElement(I.a,{position:"static"},r.a.createElement(H.a,null,r.a.createElement(W.a,{className:a.title,variant:"h6",noWrap:!0},"TouristTraceTrack"),r.a.createElement("div",{className:a.grow}),r.a.createElement("div",{className:a.sectionDesktop},r.a.createElement(xe,{iconType:"clock-circle",value:O,onChange:function(e){return w(e)},text:"Minutes to destination"})),te,T,r.a.createElement("div",{className:a.search},r.a.createElement(Ge,{autoCompleteService:e.autoCompleteService,geoCoderService:e.geoCoderService,singaporeLatLng:e.singaporeLatLng,markerName:e.name,addMarker:e.addMarker,placeholder:"Search\u2026",onSelectOption:e.onSelectOption})),e.isLoggedIn?b:y,r.a.createElement("div",{className:a.sectionMobile},r.a.createElement(G.a,{"aria-label":"show more","aria-controls":E,"aria-haspopup":"true",onClick:function(e){u(e.currentTarget)},color:"inherit"},r.a.createElement(pe.a,null))))),d,v)},Ve=t(140),Ye=t.n(Ve),Fe=t(65),qe=t.n(Fe),Ze=t(7),Ke=t.n(Ze),Xe=t(5),Je=t(145),$e=t(147),Qe=function(e){return{container:{height:"100vh",background:"url(".concat(Ie.a,") no-repeat center center fixed"),WebkitBackgroundSize:"cover",MozBackgroundSize:"cover",OBackgroundSize:"cover",backgroundSize:"cover !important"},paper:{paddingTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),color:e.palette.getContrastText(Be.a[500]),backgroundColor:Be.a[500]},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},orange:{color:e.palette.getContrastText(Be.a[500]),backgroundColor:Be.a[500]},root:{display:"flex","& > *":{margin:e.spacing(1)}},pink:{color:e.palette.getContrastText(Je.a[500]),backgroundColor:Je.a[500]},green:{color:"#fff",backgroundColor:$e.a[500]},halfWidth_x:{width:"45%"},halfWidth_x2:{width:"45%",marginLeft:"10%"}}},ea=t(505),aa=t(503),ta=t(504),na=t(515),ra=t(507),oa=t(506),la=t(20),ia=t(74),ca=t.n(ia),sa=t(502),ma=function(e){function a(e){var t;return Object(M.a)(this,a),(t=Object(P.a)(this,Object(z.a)(a).call(this,e))).state={email:"",username:"",password:"",loading:!1,errors:{}},t.handleChange=t.handleChange.bind(Object(A.a)(t)),t.handleSubmit=t.handleSubmit.bind(Object(A.a)(t)),t}return Object(D.a)(a,e),Object(_.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&(this.props.history.push("/"),f.a.success("User already logged in. Redirecting..."))}},{key:"componentWillReceiveProps",value:function(e,a){var t=this;e.auth.isAuthenticated&&this.props.history.push("/"),e.errors&&!e.auth.isAuthenticated&&this.setState({errors:e.errors},(function(){t.setState({loading:!1}),void 0!==t.state.errors.message&&f.a.error(t.state.errors.message)}))}},{key:"handleChange",value:function(e){this.setState(Object(R.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault();var a={username:this.state.username,password:this.state.password};console.log("".concat(this.state.username).concat(this.state.password)),this.setState({loading:!0}),this.props.loginUser(a,this.props.history),console.log("Handle submit")}},{key:"render",value:function(){var e=this.props.classes,a=this.state,t=(a.email,a.username),n=a.password,o=a.loading;return r.a.createElement("section",{className:e.container},r.a.createElement(sa.a,{component:"main",maxWidth:"xs"},r.a.createElement(aa.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(Pe.a,{className:e.avatar},r.a.createElement(ca.a,null)),r.a.createElement(W.a,{component:"h1",variant:"h5"},"Login"),r.a.createElement(la.ValidatorForm,{onSubmit:this.handleSubmit,ref:"form",className:e.form},r.a.createElement(la.TextValidator,{label:"Username*",value:t,name:"username",onChange:this.handleChange,fullWidth:!0,placeholder:"Password",variant:"outlined",type:"text",margin:"normal",validators:["required"],errorMessages:["Enter a username"]}),r.a.createElement(la.TextValidator,{className:e.form,value:n,placeholder:"Password",name:"password",variant:"outlined",margin:"normal",onChange:this.handleChange,type:"password",fullwidth:!0,id:"password",label:"Password*",autoComplete:"password",autoFocus:!0,validators:["required"],errorMessages:["Please enter a password"]}),r.a.createElement("br",null),r.a.createElement(ta.a,{control:r.a.createElement(na.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(ea.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:o},"LogIn"),r.a.createElement(oa.a,{container:!0},r.a.createElement(oa.a,{item:!0,xs:!0},r.a.createElement(ra.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(oa.a,{item:!0},r.a.createElement(ra.a,{href:"/register",variant:"body2"},"Don't have an account? Sign Up"))))),r.a.createElement(W.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(ra.a,{color:"inherit",href:"https://material-ui.com/"},"Tourist Trace Tracking")," ",(new Date).getFullYear(),".")))}}]),a}(n.Component),ua=Object(y.b)((function(e){return{auth:e.auth,errors:e.errors}}),{loginUser:v})(Object(Xe.a)(Qe,{withTheme:!0})(ma)),da=t(276),pa=t.n(da),ha=function(e){var a=e.name,t=e.key,n=e.lat,o=e.lng,l=e.handleMarkerClick,i=e.col;return r.a.createElement("div",{key:t,style:{width:"10em",zIndex:"9000"},onClick:function(){return l(n,o)}},r.a.createElement("span",{className:"brand-red"},r.a.createElement("b",null,a)),r.a.createElement("br",null),r.a.createElement(pa.a,{style:{color:"".concat(i),fontSize:"2.5em"}}))},ga=t(275),fa=t(516),va=t(4),Ea=t(508),ba=t(509),ya=t(510),ka=t(511),Sa=t(512),Ca=t(146),Oa=t(202),wa=t.n(Oa),Na=t(203),xa=t.n(Na),ja=t(204),La=t.n(ja),Ta=t(277),Ba=t.n(Ta),Ra=Object(ga.a)((function(e){return{card:{maxWidth:345,width:"24em",margin:"0 1em 1em 1em"},media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:Ca.a[500]}}})),Ma=function(e){var a=e.info,t=e.key,n=Ra(),o=r.a.useState(!1),l=Object(U.a)(o,2),i=l[0],c=l[1],s=function(){c(!i)},m=a.address,u=a.distanceText,d=a.name,p=a.openNow,h=a.priceLevel,g=a.rating,f=a.timeText,v=a.photoUrl;return""===v&&(v="https://carolinadojo.com/wp-content/uploads/2017/04/default-image.jpg"),console.log(v),console.log(t+"ll"),r.a.createElement(Ba.a,{isFlipped:i,flipDirection:"vertical"},r.a.createElement(Ea.a,{className:n.card,key:t},r.a.createElement(ba.a,{title:d}),r.a.createElement(ya.a,{className:n.media,image:v,title:d}),r.a.createElement(ka.a,null,r.a.createElement(W.a,{variant:"body2",color:"textSecondary",component:"p"},r.a.createElement("span",{className:"d-block text-center"},"Distance: ",u," - ",f," away")),r.a.createElement(W.a,{variant:"body2",color:"textSecondary",component:"p",className:"text-center"},r.a.createElement(fa.a,{value:g})," ",r.a.createElement("br",null),r.a.createElement(fa.a,{value:h,character:"$"}))),r.a.createElement(Sa.a,{disableSpacing:!0},r.a.createElement(G.a,{"aria-label":"add to favorites"},r.a.createElement(wa.a,null)),r.a.createElement(G.a,{"aria-label":"share"},r.a.createElement(xa.a,null)),r.a.createElement(G.a,{className:Object(va.a)(n.expand,Object(R.a)({},n.expandOpen,i)),onClick:s,"aria-expanded":i,"aria-label":"show more"},r.a.createElement(La.a,null)))),r.a.createElement(Ea.a,{className:n.card,key:t},r.a.createElement(ba.a,{title:d}),r.a.createElement(ka.a,null,r.a.createElement(W.a,{variant:"body2",color:"textSecondary",component:"p"},r.a.createElement("p",{className:"text-center"},"Address"),r.a.createElement("hr",null),m),r.a.createElement(W.a,{variant:"body2",color:"textSecondary",component:"p",className:"text-center"},p?r.a.createElement("span",null,r.a.createElement("b",null,"Open now")," "):r.a.createElement("span",null,r.a.createElement("b",null,"Closed now")))),r.a.createElement(Sa.a,{disableSpacing:!0},r.a.createElement(G.a,{"aria-label":"add to favorites"},r.a.createElement(wa.a,null)),r.a.createElement(G.a,{"aria-label":"share"},r.a.createElement(xa.a,null)),r.a.createElement(G.a,{className:Object(va.a)(n.expand,Object(R.a)({},n.expandOpen,i)),onClick:s,"aria-expanded":i,"aria-label":"show more"},r.a.createElement(La.a,null)))))},_a=t(513),Pa=function(e){return function(a){var t;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t="http://34.87.80.154:443/api/users/".concat(e,"/history"),console.log("id is ".concat(e)),console.log(t),console.log("Token from profile actions is:"),console.log(),d.a.defaults.headers.common.Authorization="Bearer "+d.a.defaults.headers.common.Authorization,n.next=8,g.a.awrap(d.a.get(t).then((function(e){console.log("res is:"),console.log(e),a({type:"GET_HISTORY",payload:e.data.data}),a(Aa()),f.a.success("Got users history")})).catch((function(e){a({type:"GET_HISTORY",payload:[]})})));case 8:d.a.defaults.headers.common.Authorization=d.a.defaults.headers.common.Authorization.slice(7);case 9:case"end":return n.stop()}}))}},za=function(e,a,t){return function(n){return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return"http://34.87.80.154:443",d.a.defaults.headers.common.Authorization="Bearer "+d.a.defaults.headers.common.Authorization,r.next=4,g.a.awrap(d.a.post("".concat("http://34.87.80.154:443","/api/users/").concat(a,"/history"),e).then((function(e){console.log("update res is:"),console.log(e),Pa(a),t.push("/"),n(Aa()),f.a.success("History Updated Successfully")})).catch((function(e){console.log("Update err is:"),console.log(e),n({type:"GET_HISTORY",payload:[]})})));case 4:d.a.defaults.headers.common.Authorization=d.a.defaults.headers.common.Authorization.slice(7);case 5:case"end":return r.stop()}}))}},Aa=function(){return{type:"CLEAR_ERRORS"}},Da=function(e){function a(e){var t;return Object(M.a)(this,a),(t=Object(P.a)(this,Object(z.a)(a).call(this,e))).handleOption=function(e,a,n,r){null!=e&&t.setState({isSelectorOpenValue:e}),null!=a&&t.setState({selectorValue:a}),null!=n&&t.setState({sliderValue:n}),null!=r&&t.setState({searchValue:r}),console.log(e+"selectorOpenvalue"),console.log(a+"selector value"),console.log(n+"slidervalue"),console.log(r+"searchvalue"),setTimeout(t.handleSearch,1e3)},t.handleMarkerClick=function(e,a){console.log("Marker clicked"),console.log(e+""+a),t.setState({SG_COOR:{lat:e,lng:a},zoom:30})},t.updateConstraintName=function(e,a){e.preventDefault();var n=t.state.constraints,r=Object.assign([],n);r[a].name=e.target.value,t.setState({constraints:r})},t.updateConstraintTime=function(e,a){var n=t.state.constraints,r=Object.assign([],n);r[e].time=a,t.setState({constraints:r})},t.addMarker=function(e,a,n){t.setState({placeLocation:{lat:e,lng:a}});var r=t.state.markers,o=Object.assign([],r),l=n.split(",",2),i=n.split(",",2)+" "+n.split(",")[n.split(",").length-1];console.log(l+"shortname"),console.log(i+"shortname2");for(var c=!0,s=0;s<o.length;s++)if(o[s].name===n){c=!1,o[s].lat=e,o[s].lng=a,f.a.success('Updated "'.concat(i,'" Marker'));break}c&&(o.push({lat:e,lng:a,name:i}),f.a.success('Added new "'.concat(i,'" Marker'))),t.setState({markers:o}),t.handleSearch()},t.apiHasLoaded=function(e,a){console.log("map"),console.log(e),console.log(a),t.setState({mapsLoaded:!0,map:e,mapsApi:a,singaporeLatLng:new a.LatLng(t.state.SG_COOR.lat,t.state.SG_COOR.lng),autoCompleteService:new a.places.AutocompleteService,placesService:new a.places.PlacesService(e),geoCoderService:new a.Geocoder,directionService:new a.DirectionsService})},t.toggleMap=function(){t.state.searchResults.length>0&&t.setState({showCard:!t.state.showCard})},t.handleSearch=function(){var e=t.state,a=e.markers,n=(e.constraints,e.sliderValue),r=e.placesService,o=e.directionService,l=e.mapsApi;if(0!==a.length){var i=[],c=a[a.length-1],s=n,m=new l.LatLng(c.lat,c.lng),u={location:m,type:[t.state.selectorValue],query:t.state.selectorValue,rankBy:l.places.RankBy.DISTANCE};r.textSearch(u,(function(e){console.log("response is: "),console.log(e);for(var a=Math.min(10,e.length),n=function(a){var n=e[a],r=n.rating,l=n.name,c=n.formatted_address,u=n.price_level,d="",p=!1;n.opening_hours&&(p=n.opening_hours.open_now),n.photos&&n.photos.length>0&&(d=n.photos[0].getUrl());var h={origin:m,destination:c,travelMode:"DRIVING"};o.route(h,(function(e,a){if("OK"===a){var n=e.routes[0].legs[0];if(n.duration.value/60<s){var o=n.distance.text,m=n.duration.text;i.push({name:l,rating:r,address:c,openNow:p,priceLevel:u,photoUrl:d,distanceText:o,timeText:m})}t.setState({searchResults:i})}}))},r=0;r<a;r++)n(r)}))}else f.a.warn("Add a constraint and try again!")},t.state={constraints:[{name:"",time:0}],searchResults:[],mapsLoaded:!1,markers:[],map:{},mapsApi:{},singaporeLatLng:{},autoCompleteService:{},placesService:{},geoCoderService:{},directionService:{},isSelectorOpenValue:!1,showCard:!1,selectorValue:"cafe",sliderValue:30,searchValue:null,SG_COOR:{lat:21.0278,lng:105.8342},zoom:18,currentLocation:{},placeLocation:{},arrival_time:"",leave_time:""},t.onLogoutClick=t.onLogoutClick.bind(Object(A.a)(t)),t.handleOption=t.handleOption.bind(Object(A.a)(t)),t.handleMarkerClick=t.handleMarkerClick.bind(Object(A.a)(t)),t.toggleMap=t.toggleMap.bind(Object(A.a)(t)),t.saveLocation=t.saveLocation.bind(Object(A.a)(t)),t}return Object(D.a)(a,e),Object(_.a)(a,[{key:"onLogoutClick",value:function(e){e.preventDefault(),this.props.logoutUser()}},{key:"saveLocation",value:function(){if(this.props.auth.isAuthenticated){var e=[{latitude:this.state.currentLocation.lat,longitude:this.state.currentLocation.lng,arrival_at:this.state.arrival_time}],a=this.props.auth.user.result.id;console.log("auth is"),console.log(this.props.auth.user),this.props.updateHistory(e,a,this.props.history);var t=new Date,n=qe()(t.toDateString()+" "+t.toTimeString()).format("YYYY-MM-DD HH:mm:ss");this.setState({arrival_time:n})}}},{key:"componentDidMount",value:function(){var e=this;console.log(navigator),navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(a){console.log("pos is:"),console.log(a);var t={lat:a.coords.latitude,lng:a.coords.longitude},n=new Date,r=qe()(n.toDateString()+" "+n.toTimeString()).format("YYYY-MM-DD HH:mm:ss");e.setState({currentLocation:t,placeLocation:t,arrival_time:r});var o=e.state.markers,l=Object.assign([],o);l.push({lat:t.lat,lng:t.lng,name:""}),e.setState({markers:l}),setTimeout(e.handleSearch,1e3),console.log(e.state.arrival_time),console.log()}));window.addEventListener("beforeunload",(function(a){a.preventDefault();var t=new Date,n=qe()(t.toDateString()+" "+t.toTimeString()).format("YYYY-MM-DD HH:mm:ss");return e.setState({leave_time:n},(function(){e.saveLocation()})),a.returnValue="Are you sure you want to close?"})),setInterval((function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(a){var t={lat:a.coords.latitude,lng:a.coords.longitude};if(t.lat!==e.state.currentLocation.lat||t.lng!==e.state.currentLocation.lng){console.log("Location changed"),console.log(t);var n=new Date,r=qe()(n.toDateString()+" "+n.toTimeString()).format("YYYY-MM-DD HH:mm:ss");e.setState({leave_time:r,currentLocation:t},(function(){e.saveLocation()}))}else console.log("Same location"),console.log(t)}))}),3e4)}},{key:"render",value:function(){var e,a=this,t=this.props.auth,n=t.isAuthenticated,o=(t.user,this.props.classes),l=this.state,i=(l.constraints,l.mapsLoaded),c=l.singaporeLatLng,s=l.markers,m=l.searchResults,u=l.name,d=l.isSelectorOpenValue,p=l.showCard,h=l.currentLocation,g=l.placeLocation,f=this.state,v=f.autoCompleteService,E=f.geoCoderService,b=(f.SG_COOR,f.zoom),y=f.selectorValue;return r.a.createElement("div",{style:{width:"100%",maxWidth:"100%",overflow:"hidden"}},i?r.a.createElement(We,{isLoggedIn:n,logOutUser:this.props.logoutUser,onSelectOption:this.handleOption,autoCompleteService:v,geoCoderService:E,singaporeLatLng:c,markerName:u,addMarker:this.addMarker}):null,r.a.createElement("section",{className:Ke()(o.mapStyle,(e={},Object(R.a)(e,o.isSelectorOpenStyle,d),Object(R.a)(e,o.showCard,p),e))},r.a.createElement(Ye.a,{className:o.mapStyle,bootstrapURLKeys:{key:"AIzaSyCH-sM0x6FKG1Yh9CGf99d6SUa0wMvo8Ig",libraries:["places","directions"]},center:{lat:g.lat,lng:g.lng},defaultZoom:b,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){var t=e.map,n=e.maps;return a.apiHasLoaded(t,n)}},s.map((function(e,t){var n=e.name,o=e.lat,l=e.lng;return r.a.createElement(ha,{key:t,name:n,handleMarkerClick:a.handleMarkerClick,lat:o,lng:l,col:"rgb(245, 0, 87)"})})),void 0!==h.lat?r.a.createElement(ha,{key:"khg",handleMarkerClick:this.handleMarkerClick,lat:h.lat,lng:h.lng,col:"rgb(63, 81, 181)"}):null)),m.length>0&&p?r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:o.cardContainer},r.a.createElement("section",{className:"col-12 ml-5 "},r.a.createElement("div",{className:"d-flex flex-column justify-content-center"},r.a.createElement("h1",{className:"mb-4 fw-md"},y.replace("_"," ")),r.a.createElement("div",{className:"d-flex flex-wrap"},m.map((function(e,a){return r.a.createElement(Ma,{info:e,key:a})}))))))):null,p?r.a.createElement(_a.a,{color:"secondary",style:{fontSize:"1em",position:"fixed",top:"90%",marginLeft:"0.5em"},onClick:this.toggleMap},r.a.createElement(Oe.a,{className:"fas fa-angle-double-left",onClick:this.toggleMap})):r.a.createElement(_a.a,{color:"secondary",style:{fontSize:"1em",position:"absolute",top:"87%",marginLeft:"0.5em"},onClick:this.toggleMap},r.a.createElement(Oe.a,{className:"fas fa-angle-double-right",onClick:this.toggleMap})))}}]),a}(n.Component),Ua=Object(y.b)((function(e){return{auth:e.auth}}),{logoutUser:b,updateHistory:za})(Object(Xe.a)(He,{withTheme:!0})(Da)),Ia=t(278),Ha=t.n(Ia),Ga=function(e){return{container:{height:"100vh",color:"white",background:"url(".concat(Ha.a,") no-repeat center center fixed"),WebkitBackgroundSize:"cover",MozBackgroundSize:"cover",OBackgroundSize:"cover",backgroundSize:"cover !important"},mapStyle:{marginTop:"1.5em",height:"90%",width:"60%",padding:"0",position:"absolute"},historyStyle:{marginTop:"3em",height:"100vh",width:"38%"},hist:{fontSize:"1.5em",textAlign:"center",marginTop:"0.5em",marginBottom:"0.5em",padding:"0.2em","&:hover":{color:"gray",borderRadius:"10%",background:"rgba(16, 16, 16, 0.5)"}},selected:{color:"gray"},yourHistory:{fontSize:"3em",textAlign:"center",color:"gray",fontWeight:"bold"},scrollbar:{},forceOverflow:{minHeight:"450px"},styleone:{}}},Wa=function(e){function a(e){var t;return Object(M.a)(this,a),(t=Object(P.a)(this,Object(z.a)(a).call(this,e))).state={errors:{},hist:[],zoom:18,currentLocation:{lat:21.0278,lng:105.8342,arrival_at:null,leave_at:null},histSelected:null},t}return Object(D.a)(a,e),Object(_.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.auth.user.result.id;this.props.getUserHistory(e)}},{key:"componentWillReceiveProps",value:function(e,a){var t=this;e.errors&&e.auth.isAuthenticated&&this.setState({errors:e.errors},(function(){t.setState({loading:!1}),void 0!==t.state.errors.message&&f.a.error(t.state.errors.message)})),e.hist&&this.setState({hist:e.hist})}},{key:"handleClick",value:function(e,a){var t={lat:e.latitude,lng:e.longitude,arrival_at:qe()(e.arrival_at).format("YYYY-MM-DD HH:mm:ss")};this.setState({currentLocation:t,histSelected:a})}},{key:"render",value:function(){var e=this,a=this.state,t=a.hist,n=a.currentLocation,o=a.zoom,l=a.histSelected,i=this.props.classes,c=null;return c=O(t.hist)?r.a.createElement("div",{className:i.hist},"Looks like there is nothing here!"):t.hist.map((function(a,t){return r.a.createElement("div",{key:t,onClick:function(){return e.handleClick(a,t)},className:Ke()(i.hist,Object(R.a)({},i.selected,t===l))},"Latitude: ",a.latitude,"\xb0 Longitude: ",a.longitude,"\xb0")})),r.a.createElement("div",{style:{width:"100%",maxWidth:"100%",overflow:"hidden"},className:i.container},r.a.createElement("section",{className:i.historyStyle,style:{display:"inline-block",overflow:"scroll"}},r.a.createElement("p",{className:i.yourHistory},"Your History"),c),r.a.createElement("section",{className:i.mapStyle,style:{display:"inline-block"}},null!==n.arrival_at&&void 0!==n.arrival_at&&"Invalid date"!==n.arrival_at?r.a.createElement("div",{style:{marginBottom:"0.2em",color:"white",textAlign:"center",fontSize:"1.5em"}},"You arrived at ",n.arrival_at):null,r.a.createElement(Ye.a,{className:i.mapStyle,bootstrapURLKeys:{key:"AIzaSyCH-sM0x6FKG1Yh9CGf99d6SUa0wMvo8Ig",libraries:["places","directions"]},center:{lat:n.lat,lng:n.lng},defaultZoom:o,yesIWantToUseGoogleMapApiInternals:!0},r.a.createElement(ha,{lat:n.lat,lng:n.lng,col:"rgb(245, 0, 87)"}))))}}]),a}(n.Component),Va=Object(y.b)((function(e){return{auth:e.auth,errors:e.errors,profile:e.profile,hist:e.hist}}),{getUserHistory:Pa,updateHistory:za})(Object(Xe.a)(Ga,{withTheme:!0})(Object(c.g)(Wa))),Ya=function(e){return function(a){var t;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t="http://34.87.80.154:443/api/users/".concat(e),console.log("id is ".concat(e)),console.log(t),console.log("Token from profile actions is:"),console.log(),d.a.defaults.headers.common.Authorization="Bearer "+d.a.defaults.headers.common.Authorization,n.next=8,g.a.awrap(d.a.get(t).then((function(e){console.log("res is:"),console.log(e),console.log(e.data.data),a({type:"GET_PROFILE",payload:e.data.data}),a(Fa()),f.a.success("Got current profile")})).catch((function(e){a({type:"GET_PROFILE",payload:{}})})));case 8:d.a.defaults.headers.common.Authorization=d.a.defaults.headers.common.Authorization.slice(7);case 9:case"end":return n.stop()}}))}},Fa=function(){return{type:"CLEAR_ERRORS"}},qa=function(e){function a(e){var t;return Object(M.a)(this,a),(t=Object(P.a)(this,Object(z.a)(a).call(this,e))).state={firstName:"",lastName:"",birthday:"",city:"",country:"",nationality:"",email:"",phone:"",errors:{},loading:!1},t.handleChange=t.handleChange.bind(Object(A.a)(t)),t.handleSubmit=t.handleSubmit.bind(Object(A.a)(t)),t}return Object(D.a)(a,e),Object(_.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.auth.user.result.id;this.props.getCurrentProfile(e),console.log("state is:"),console.log(this.state)}},{key:"componentWillReceiveProps",value:function(e,a){var t=this;e.errors&&e.auth.isAuthenticated&&this.setState({errors:e.errors},(function(){t.setState({loading:!1}),void 0!==t.state.errors.message&&f.a.error(t.state.errors.message)})),console.log("Profile is:"),console.log(e.profile);var n=qe()(e.profile.profile.birthday).format("YYYY-MM-DD");"Invalid date"===n&&(n=null),this.props.profile&&this.setState({firstName:e.profile.profile.firstName,lastName:e.profile.profile.lastName,birthday:n,city:e.profile.profile.city,country:e.profile.profile.country,nationality:e.profile.profile.nationality,email:e.profile.profile.email,phone:e.profile.profile.phone})}},{key:"handleChange",value:function(e){this.setState(Object(R.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),console.log("Handling submit");var a={firstName:this.state.firstName,lastName:this.state.lastName,birthday:this.state.birthday,city:this.state.city,country:this.state.country,nationality:this.state.nationality,email:this.state.email,phone:this.state.phone};console.log(a);var t=this.props.auth.user.result.id;console.log(t),this.setState({loading:!0}),this.props.updateProfile(a,t,this.props.history),console.log("Handle submit")}},{key:"render",value:function(){var e=this.props.classes,a=this.state,t=a.firstName,n=a.lastName,o=a.birthday,l=a.city,i=a.country,c=a.nationality,s=a.phone,m=a.email,u=a.loading;return r.a.createElement("section",{className:e.container,style:{height:"135vh"}},r.a.createElement(sa.a,{component:"main",maxWidth:"xs"},r.a.createElement(aa.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(Pe.a,{className:e.avatar},r.a.createElement(ca.a,null)),r.a.createElement(W.a,{component:"h1",variant:"h5"},"Your Profile"),r.a.createElement(la.ValidatorForm,{onSubmit:this.handleSubmit,ref:"form",className:e.form},r.a.createElement(la.TextValidator,{label:"First Name",value:t,name:"firstName",onChange:this.handleChange,fullWidth:!0,placeholder:"First Name",variant:"outlined",type:"text",margin:"normal",autoFocus:!0}),r.a.createElement(la.TextValidator,{label:"Last Name",value:n,name:"lastName",onChange:this.handleChange,fullWidth:!0,placeholder:"Last Name",variant:"outlined",type:"text",margin:"normal",autoFocus:!0}),r.a.createElement(la.TextValidator,{label:"Birthday",value:o,name:"birthday",onChange:this.handleChange,fullWidth:!0,variant:"outlined",type:"date",margin:"normal",InputLabelProps:{shrink:!0},autoFocus:!0}),r.a.createElement(la.TextValidator,{label:"City",value:l,name:"city",className:e.halfWidth_x,onChange:this.handleChange,placeholder:"City",variant:"outlined",type:"text",margin:"normal",autoFocus:!0}),r.a.createElement(la.TextValidator,{className:e.halfWidth_x2,label:"Country",value:i,name:"country",onChange:this.handleChange,placeholder:"Country",variant:"outlined",type:"text",margin:"normal",autoFocus:!0}),r.a.createElement(la.TextValidator,{label:"Nationality",value:c,name:"nationality",fullWidth:!0,onChange:this.handleChange,placeholder:"Nationality",variant:"outlined",type:"text",margin:"normal",autoFocus:!0}),r.a.createElement(la.TextValidator,{value:m,placeholder:"Email Address",name:"email",variant:"outlined",margin:"normal",onChange:this.handleChange,label:"Email",autoComplete:"email",autoFocus:!0,fullWidth:!0,validators:["isEmail"],errorMessages:["Must be an Email"]}),r.a.createElement(la.TextValidator,{label:"Phone",value:s,name:"phone",fullWidth:!0,onChange:this.handleChange,placeholder:"Phone Number",variant:"outlined",type:"Number",margin:"normal",autoFocus:!0}),r.a.createElement(ea.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:u,className:e.submit},"Update Profile"))),r.a.createElement(W.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(ra.a,{color:"inherit",href:"https://material-ui.com/"},"Tourist Trace Tracking")," ",(new Date).getFullYear(),".")))}}]),a}(n.Component),Za=Object(y.b)((function(e){return{auth:e.auth,errors:e.errors,profile:e.profile}}),{getCurrentProfile:Ya,updateProfile:function(e,a,t){return function(n){return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return"http://34.87.80.154:443",d.a.defaults.headers.common.Authorization="Bearer "+d.a.defaults.headers.common.Authorization,console.log(d.a.defaults.headers.common.Authorization),r.next=5,g.a.awrap(d.a.put("".concat("http://34.87.80.154:443","/api/users/").concat(a),e).then((function(e){console.log("res is:"),console.log(e),Ya(a),t.push("/"),n(Fa()),f.a.success("Profile Updated Successfully")})).catch((function(e){console.log(e),n({type:"GET_PROFILE",payload:{}})})));case 5:d.a.defaults.headers.common.Authorization=d.a.defaults.headers.common.Authorization.slice(7);case 6:case"end":return r.stop()}}))}}})(Object(Xe.a)(Qe,{withTheme:!0})(Object(c.g)(qa))),Ka=function(e){function a(e){var t;return Object(M.a)(this,a),(t=Object(P.a)(this,Object(z.a)(a).call(this,e))).state={username:"",password:"",repeatPassword:"",errors:{},loading:!1},t.handleChange=t.handleChange.bind(Object(A.a)(t)),t.handleSubmit=t.handleSubmit.bind(Object(A.a)(t)),t}return Object(D.a)(a,e),Object(_.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.auth.isAuthenticated&&(this.props.history.push("/"),f.a.success("You can't signUp when logged in. Redirecting..")),la.ValidatorForm.addValidationRule("isPasswordMatch",(function(a){return a===e.state.password}))}},{key:"componentWillReceiveProps",value:function(e,a){var t=this;if(e.errors&&!e.auth.isAuthenticated)this.setState({errors:e.errors},(function(){t.setState({loading:!1}),void 0!==t.state.errors.message&&f.a.error(t.state.errors.message)}));else{var n={username:this.state.username,password:this.state.password};setTimeout((function(){return t.props.loginUser(n,t.props.history)}),500)}}},{key:"handleChange",value:function(e){this.setState(Object(R.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),console.log("Handling submit");var a={username:this.state.username,password:this.state.password};this.setState({loading:!0}),this.props.registerUser(a,this.props.history),console.log("Handle submit")}},{key:"render",value:function(){var e=this.props.classes,a=this.state,t=(a.email,a.username),n=a.password,o=a.repeatPassword,l=a.loading;return r.a.createElement("section",{className:e.container},r.a.createElement(sa.a,{component:"main",maxWidth:"xs"},r.a.createElement(aa.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(Pe.a,{className:e.avatar},r.a.createElement(ca.a,null)),r.a.createElement(W.a,{component:"h1",variant:"h5"},"Sign Up"),r.a.createElement(la.ValidatorForm,{onSubmit:this.handleSubmit,ref:"form",className:e.form},r.a.createElement(la.TextValidator,{label:"Username*",value:t,name:"username",onChange:this.handleChange,fullWidth:!0,placeholder:"Username",variant:"outlined",type:"text",margin:"normal",validators:["required"],errorMessages:["Enter a username"]}),r.a.createElement(la.TextValidator,{className:e.form,value:n,placeholder:"Password",name:"password",variant:"outlined",margin:"normal",onChange:this.handleChange,id:"password",label:"Password*",autoComplete:"password",autoFocus:!0,validators:["required"],type:"password",errorMessages:["Please enter a password"]}),r.a.createElement(la.TextValidator,{className:e.form,value:o,placeholder:"Confirm Password",name:"repeatPassword",variant:"outlined",margin:"normal",onChange:this.handleChange,id:"repeatPassword",label:"Confirm Password*",autoComplete:"password",type:"password",autoFocus:!0,validators:["required","isPasswordMatch"],errorMessages:["Please enter a password","Password doesn't match"]}),r.a.createElement(ta.a,{control:r.a.createElement(na.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(ea.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:l,className:e.submit},"Sign Up"),r.a.createElement(oa.a,{container:!0},r.a.createElement(oa.a,{item:!0,xs:!0},r.a.createElement(ra.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(oa.a,{item:!0},r.a.createElement(ra.a,{href:"/login",variant:"body2"},"Have an account? LogIn"))))),r.a.createElement(W.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(ra.a,{color:"inherit",href:"https://material-ui.com/"},"Tourist Trace Tracking")," ",(new Date).getFullYear(),".")))}}]),a}(n.Component),Xa=Object(y.b)((function(e){return{auth:e.auth,errors:e.errors}}),{registerUser:function(e,a){return function(t){var n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n="http://34.87.80.154:443/api/users",console.log(n),r.next=4,g.a.awrap(d.a.post(n,e).then((function(n){t(v(e,a)),f.a.success("Signed up successfully")})).catch((function(e){console.log("Error"+e),t({type:"GET_ERRORS",payload:e.response.data})})));case 4:case"end":return r.stop()}}))}},loginUser:v})(Object(Xe.a)(Qe,{withTheme:!0})(Object(c.g)(Ka))),Ja=(t(459),t(460),t(3)),$a=Object(y.b)((function(e){return{auth:e.auth}}))((function(e){var a=e.component,t=e.auth,n=Object(Ja.a)(e,["component","auth"]);return(r.a.createElement(c.b,Object.assign({},n,{render:function(e){return!0===t.isAuthenticated?r.a.createElement(a,e):r.a.createElement(c.a,{to:"/login"})}})))})),Qa=function(e){function a(e){var t;return Object(M.a)(this,a),(t=Object(P.a)(this,Object(z.a)(a).call(this,e))).state={username:"",name:"",password:"",loggedIn:!1,loading:!1,errors:{}},t.handleChange=t.handleChange.bind(Object(A.a)(t)),t.handleSubmit=t.handleSubmit.bind(Object(A.a)(t)),t}return Object(D.a)(a,e),Object(_.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&(this.props.history.push("/"),f.a.success("User already logged in. Redirecting..."))}},{key:"componentWillReceiveProps",value:function(e,a){var t=this;e.auth.isAuthenticated&&this.props.history.push("/"),e.errors&&!e.auth.isAuthenticated&&this.setState({errors:e.errors},(function(){t.setState({loading:!1}),void 0!==t.state.errors.message&&f.a.error(t.state.errors.message)}))}},{key:"handleChange",value:function(e){this.setState(Object(R.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault();var a={username:this.state.username,name:this.state.name,password:this.state.password};console.log("".concat(this.state.username).concat(this.state.password)),this.setState({loading:!0}),this.props.loginAdmin(a,this.props.history),this.setState({loggedIn:!0,loading:!1}),console.log("Handle submit")}},{key:"render",value:function(){var e=this.props.classes,a=this.state,t=a.username,n=a.name,o=a.password,l=a.loading,i=a.loggedIn,c=r.a.createElement("section",{className:e.container},r.a.createElement(sa.a,{component:"main",maxWidth:"xs"},r.a.createElement(aa.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(Pe.a,{className:e.avatar},r.a.createElement(ca.a,null)),r.a.createElement(W.a,{component:"h1",variant:"h5"},"Login"),r.a.createElement(la.ValidatorForm,{onSubmit:this.handleSubmit,ref:"form",className:e.form},r.a.createElement(la.TextValidator,{label:"Username*",value:t,name:"username",onChange:this.handleChange,fullWidth:!0,placeholder:"Username",variant:"outlined",type:"text",margin:"normal",validators:["required"],errorMessages:["Enter a username"]}),r.a.createElement(la.TextValidator,{label:"Name*",value:n,name:"name",onChange:this.handleChange,fullWidth:!0,placeholder:"Name",variant:"outlined",type:"text",margin:"normal",validators:["required"],errorMessages:["Enter a name"]}),r.a.createElement(la.TextValidator,{className:e.form,value:o,placeholder:"Password",name:"password",variant:"outlined",margin:"normal",onChange:this.handleChange,type:"password",fullwidth:!0,id:"password",label:"Password*",autoComplete:"password",autoFocus:!0,validators:["required"],errorMessages:["Please enter a password"]}),r.a.createElement("br",null),r.a.createElement(ta.a,{control:r.a.createElement(na.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(ea.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:l},"LogIn"),r.a.createElement(oa.a,{container:!0},r.a.createElement(oa.a,{item:!0,xs:!0},r.a.createElement(ra.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(oa.a,{item:!0},r.a.createElement(ra.a,{href:"/register",variant:"body2"},"Don't have an account? Sign Up"))))),r.a.createElement(W.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(ra.a,{color:"inherit",href:"https://material-ui.com/"},"Tourist Trace Tracking")," ",(new Date).getFullYear(),"."))),s=r.a.createElement("section",{style:{width:"100%",maxWidth:"100%",overflow:"hidden"},className:e.container},r.a.createElement("p",null,"Admin Page"),r.a.createElement("section",{style:{width:"30%"}},r.a.createElement("p",null,"View all Users"),r.a.createElement("p",null,"Delete a User"),r.a.createElement("p",null,"Update a User History"),r.a.createElement("p",null,"Delete a User History"),r.a.createElement("p",null,"Update a User Profile")),r.a.createElement("section",{style:{width:"70%"}},r.a.createElement("p",null,"Stuff Here")));return r.a.createElement(r.a.Fragment,null,i?s:c)}}]),a}(n.Component),et=Object(y.b)((function(e){return{auth:e.auth,errors:e.errors}}),{loginAdmin:function(e,a){return function(a){return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return"http://34.87.80.154:443/api/users/admin",console.log("logging in admin "),t.next=4,g.a.awrap(d.a.post("http://34.87.80.154:443/api/users/admin",e).then((function(e){console.log("res is:"+e),console.log(e),f.a.success("Login Successful")})).catch((function(e){console.log("err is :".concat(e)),console.log(e),console.log(e.data),console.log(e.response),a({type:"GET_ERRORS",payload:e.response.data})})));case 4:case"end":return t.stop()}}))}}})(Object(Xe.a)(Qe,{withTheme:!0})(Qa));if(localStorage.jwtToken){p(localStorage.jwtToken);var at=m()(localStorage.jwtToken);B.dispatch(E(at));var tt=Date.now()/1e3;at.exp<tt&&(B.dispatch(b()),window.location.href="/login")}var nt=function(){return r.a.createElement(y.a,{store:B},r.a.createElement(i.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(Ua,e)}}),r.a.createElement(c.b,{exact:!0,path:"/login",render:function(e){return r.a.createElement(ua,e)}}),r.a.createElement(c.b,{exact:!0,path:"/admin",render:function(e){return r.a.createElement(et,e)}}),r.a.createElement(c.b,{exact:!0,path:"/register",render:function(e){return r.a.createElement(Xa,e)}}),r.a.createElement($a,{exact:!0,path:"/history/:id",component:Va}),r.a.createElement($a,{exact:!0,path:"/profile",component:Za})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(nt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[296,1,2]]]);
//# sourceMappingURL=main.de0518df.chunk.js.map